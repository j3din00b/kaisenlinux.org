<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.2">
    <meta name="project" content="Manpages v2.2.0">

    <title>quantize — Manpages v2.2.0</title>
    <link rel="stylesheet" href="dist/html-elixir-ZA3CNPHL.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-XRYTXUVD.js"></script>
    <script src="dist/sidebar_items-06493C4F.js"></script>

      <script src="doc-versions.js"></script>

    <script async src="dist/html-3CAFJ3W7.js"></script>

<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://kaisenlinux.org/manpages/">
        <img src="assets/logo.jpg" alt="Manpages" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v2.2.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">MANUALS</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>



  <span>quantize</span>
</h1>

<p>quantize(5)                                                                        File Formats Manual                                                                        quantize(5)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Quantize</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">algorithm</span><span class="o">.</span></code></pre><p>SYNOPSIS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="c1">#include &lt;magick.h&gt;</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">describes</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="n">performs</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">fully</span><span class="w"> </span><span class="n">understand</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">document</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">knowledge</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="n">imaging</span><span class="w"> </span><span class="n">techniques</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">tree</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">structure</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">terminology</span><span class="o">.</span><span class="w">

   </span><span class="nc">For</span><span class="w"> </span><span class="n">purposes</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">allocation</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">pixels</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="o">.</span><span class="w">  </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">3</span><span class="o">-</span><span class="n">dimensional</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="n">space</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">pixel</span><span class="p">,</span><span class="w"> </span><span class="n">pi</span><span class="p">,</span><span class="w">  </span><span class="n">is</span><span class="w"> </span><span class="n">de</span><span class="err">‐</span><span class="w">
   </span><span class="n">fined</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">ordered</span><span class="w"> </span><span class="n">triple</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="n">coordinates</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9564454974-1">(</span><span class="n">ri</span><span class="p">,</span><span class="w"> </span><span class="n">gi</span><span class="p">,</span><span class="w"> </span><span class="n">bi</span><span class="p" data-group-id="9564454974-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Each</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="p" data-group-id="9564454974-2">(</span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">blue</span><span class="p" data-group-id="9564454974-2">)</span><span class="w"> </span><span class="n">represents</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">intensity</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">varies</span><span class="w"> </span><span class="n">linearly</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">cmax</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">corresponds</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">saturation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w">
   </span><span class="n">color</span><span class="o">.</span><span class="w">  </span><span class="nc">Color</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">consisting</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cube</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">opposite</span><span class="w"> </span><span class="n">vertices</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="p" data-group-id="9564454974-3">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p" data-group-id="9564454974-3">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="p" data-group-id="9564454974-4">(</span><span class="n">cmax</span><span class="p">,</span><span class="n">cmax</span><span class="p">,</span><span class="n">cmax</span><span class="p" data-group-id="9564454974-4">)</span><span class="o">.</span><span class="w">  </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">cmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">maps</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">onto</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">represents</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">cube</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">domain</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">discussion</span><span class="p">,</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">cubes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">coordinate</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">two</span><span class="w">
   </span><span class="n">opposite</span><span class="w"> </span><span class="ss">vertices</span><span class="p">:</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">vertex</span><span class="w"> </span><span class="n">nearest</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">vertex</span><span class="w"> </span><span class="n">farthest</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">origin</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">tree</span><span class="sc">&#39;s root node represents the the entire domain, (0,0,0) through (cmax,cmax,cmax).  Each lower level in the tree is generated by subdividing one node&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">cube</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">eight</span><span class="w">
   </span><span class="n">smaller</span><span class="w"> </span><span class="n">cubes</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">size</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">corresponds</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">bisecting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">cube</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">planes</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">midpoints</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">edge</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">basic</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">operates</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="ss">phases</span><span class="p">:</span><span class="w">  </span><span class="nc">Classification</span><span class="p">,</span><span class="w"> </span><span class="nc">Reduction</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Assignment</span><span class="o">.</span><span class="w">  </span><span class="nc">Classification</span><span class="w"> </span><span class="n">builds</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">Reduction</span><span class="w"> </span><span class="n">collapses</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">tree</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">represents</span><span class="p">,</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">most</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">Assignment</span><span class="w"> </span><span class="n">defines</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="sc">&#39;s color map and sets each pixel&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">by</span><span class="w">
   </span><span class="n">reclassification</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="n">tree</span><span class="o">.</span><span class="w"> </span><span class="nc">Our</span><span class="w"> </span><span class="n">goal</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">minimize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">numerical</span><span class="w"> </span><span class="n">discrepancies</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">quantized</span><span class="w"> </span><span class="n">colors</span><span class="o">.</span><span class="w">  </span><span class="nc">To</span><span class="w"> </span><span class="n">learn</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">quantization</span><span class="w"> </span><span class="n">er</span><span class="err">‐</span><span class="w">
   </span><span class="n">ror</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="nc">MEASURING</span><span class="w"> </span><span class="nc">COLOR</span><span class="w"> </span><span class="nc">REDUCTION</span><span class="w"> </span><span class="nc">ERROR</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="w">

   </span><span class="nc">Classification</span><span class="w"> </span><span class="n">begins</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">initializing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">sufficient</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">represent</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">leaf</span><span class="o">.</span><span class="w">  </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">impractical</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">a</span><span class="w">
   </span><span class="n">fully</span><span class="o">-</span><span class="n">formed</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">classification</span><span class="w"> </span><span class="n">phase</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">realistic</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">cmax</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">components</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">quantized</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">k</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="n">precision</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w">
   </span><span class="n">cmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="n">levels</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">representing</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">leaf</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">becomes</span><span class="w"> </span><span class="n">prohibitive</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="sc">&#39;s total number
   of nodes is

           Σ ki=1 8k

   A complete tree would require 19,173,961 nodes for k = 8, cmax = 255.  Therefore, to avoid building a fully populated tree, ImageMagick: (1) Initializes data structures for nodes
   only as they are needed; (2) Chooses a maximum depth for the tree as a function of the desired number of colors in the output image (currently log4(colormap size)+2).  A tree of
   this depth generally allows the best representation of the source image with the fastest computational speed and the least amount of memory.  However, the default depth is inap‐
   propriate for some images.  Therefore, the caller can request a specific tree depth.

   For each pixel in the input image, classification scans downward from the root of the color description tree.  At each level of the tree, it identifies the single node which rep‐
   resents a cube in RGB space containing the pixel&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">color</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="ss">node</span><span class="p">:</span><span class="w">

   </span><span class="ss">n1</span><span class="p">:</span><span class="w">    </span><span class="nc">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="n">whose</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">RGB</span><span class="w"> </span><span class="n">cube</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">represents</span><span class="p">;</span><span class="w">

   </span><span class="ss">n2</span><span class="p">:</span><span class="w">    </span><span class="nc">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="n">whose</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">represented</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="p">;</span><span class="w">  </span><span class="n">initially</span><span class="p">,</span><span class="w">  </span><span class="n">n2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="n">leaves</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="o">.</span><span class="w">

   </span><span class="nc">Sr</span><span class="p">,</span><span class="w"> </span><span class="nc">Sg</span><span class="p">,</span><span class="w"> </span><span class="ss">Sb</span><span class="p">:</span><span class="w">
          </span><span class="nc">Sums</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">classified</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">depth</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">combination</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">sums</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">ultimately</span><span class="w"> </span><span class="n">characterize</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">mean</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="n">represented</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">node</span><span class="o">.</span><span class="w">

   </span><span class="ss">E</span><span class="p">:</span><span class="w">     </span><span class="nc">The</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="n">squared</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">nodes</span><span class="sc">&#39; center.  This represents the quantization error for a node.

   Reduction repeatedly prunes the tree until the number of nodes with n2  &gt; 0 is less than or equal to the maximum number of colors allowed in the output image.  On any given iter‐
   ation over the tree, it selects those nodes whose E value is minimal for pruning and merges their color statistics upward.  It uses a pruning threshold, Ep, to govern node selec‐
   tion as follows:

     Ep = 0
     while number of nodes with (n2 &gt; 0) &gt; required maximum number of colors
         prune all nodes such that E &lt;= Ep
         Set Ep  to minimum E in remaining nodes

   This has the effect of minimizing any quantization error when merging two nodes together.

   When a node to be pruned has offspring, the pruning procedure invokes itself recursively in order to prune the tree from the leaves upward.  The values of n2  Sr, Sg,  and Sb in
   a node being pruned are always added to the corresponding data in that node&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">parent</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">retains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pruned</span><span class="w"> </span><span class="n">node</span><span class="sc">&#39;s color characteristics for later averaging.

   For each node,  n2 pixels exist for which that node represents the smallest volume in RGB space containing those pixel&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">colors</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w"> </span><span class="n">n2</span><span class="w">  </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">uniquely</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">a</span><span class="w">
   </span><span class="n">color</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">At</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">beginning</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">reduction</span><span class="p">,</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">leaves</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">represent</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="n">n1</span><span class="p">,</span><span class="w">  </span><span class="n">indicates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cubic</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">represents</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">includes</span><span class="w"> </span><span class="n">n1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">n2</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="n">whose</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">defined</span><span class="w">
   </span><span class="n">by</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span><span class="o">.</span><span class="w">

   </span><span class="nc">Assignment</span><span class="w"> </span><span class="n">generates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pruned</span><span class="w"> </span><span class="n">tree</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">consists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="ss">parts</span><span class="p">:</span><span class="w">  </span><span class="p" data-group-id="9564454974-5">(</span><span class="mi">1</span><span class="p" data-group-id="9564454974-5">)</span><span class="w">  </span><span class="nc">A</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">map</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">descriptions</span><span class="w"> </span><span class="p" data-group-id="9564454974-6">(</span><span class="nc">RGB</span><span class="w"> </span><span class="n">triples</span><span class="p" data-group-id="9564454974-6">)</span><span class="w"> </span><span class="k">for</span><span class="w">
   </span><span class="n">each</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="p">;</span><span class="w"> </span><span class="p" data-group-id="9564454974-7">(</span><span class="mi">2</span><span class="p" data-group-id="9564454974-7">)</span><span class="w">  </span><span class="nc">A</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">represents</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="w">

   </span><span class="nc">First</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">assignment</span><span class="w"> </span><span class="n">phase</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pruned</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">establish</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="sc">&#39;s color map.  For each node with n2 &gt; 0, it divides Sr, Sg, and Sb by n2.
   This produces the mean color of all pixels that classify no lower than this node.  Each of these colors becomes an entry in the color map.

   Finally, the assignment phase reclassifies each pixel in the pruned tree to identify the deepest node containing the pixel&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">color</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">pixel</span><span class="sc">&#39;s value in the pixel array becomes
   the index of this node&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">map</span><span class="o">.</span><span class="w">

   </span><span class="nc">Empirical</span><span class="w"> </span><span class="n">evidence</span><span class="w"> </span><span class="n">suggests</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">distances</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">spaces</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="nc">YUV</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">YIQ</span><span class="w"> </span><span class="n">correspond</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perceptual</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">differences</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">closely</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="k" data-group-id="9564454974-8">do</span><span class="w"> </span><span class="n">distances</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="o">.</span><span class="w">  </span><span class="nc">These</span><span class="w">
   </span><span class="n">color</span><span class="w"> </span><span class="n">spaces</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">better</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reducing</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">Here</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">described</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alternate</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">space</span><span class="o">.</span><span class="w">  </span><span class="nc">For</span><span class="w"> </span><span class="n">conve</span><span class="err">‐</span><span class="w">
   </span><span class="n">nience</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">components</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">cmax</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">proceed</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">described</span><span class="o">.</span></code></pre><p>MEASURING COLOR REDUCTION ERROR</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">obvious</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">invisible</span><span class="o">.</span><span class="w">  </span><span class="nc">Images</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">spatial</span><span class="w"> </span><span class="n">frequencies</span><span class="w"> </span><span class="p" data-group-id="7659334729-1">(</span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">hair</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">grass</span><span class="p" data-group-id="7659334729-1">)</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">much</span><span class="w"> </span><span class="n">less</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">pic</span><span class="err">‐</span><span class="w">
   </span><span class="n">tures</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">large</span><span class="w"> </span><span class="n">smoothly</span><span class="w"> </span><span class="n">shaded</span><span class="w"> </span><span class="n">areas</span><span class="w"> </span><span class="p" data-group-id="7659334729-2">(</span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">faces</span><span class="p" data-group-id="7659334729-2">)</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">high</span><span class="o">-</span><span class="n">frequency</span><span class="w"> </span><span class="n">contour</span><span class="w"> </span><span class="n">edges</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">masked</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">fre</span><span class="err">‐</span><span class="w">
   </span><span class="n">quencies</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">

   </span><span class="nc">To</span><span class="w"> </span><span class="n">measure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="p" data-group-id="7659334729-3">(</span><span class="n">the</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">error</span><span class="p" data-group-id="7659334729-3">)</span><span class="p">,</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="n">sums</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="n">squared</span><span class="w"> </span><span class="ow">in</span><span class="w">
   </span><span class="nc">RGB</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="n">prints</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">pixel</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">er</span><span class="err">‐</span><span class="w">
   </span><span class="n">ror</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">error</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">measurement</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compare</span><span class="w"> </span><span class="n">images</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">general</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">closer</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">quantized</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">resembles</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">Ide</span><span class="err">‐</span><span class="w">
   </span><span class="n">ally</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">perceptually</span><span class="o">-</span><span class="n">based</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">human</span><span class="w"> </span><span class="n">eye</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">judge</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">quantization</span><span class="w"> </span><span class="n">quality</span><span class="o">.</span><span class="w">

   </span><span class="nc">These</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">measured</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="o">-</span><span class="n">verbose</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">-</span><span class="n">colors</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w">

   </span><span class="n">mean</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="ss">pixel</span><span class="p">:</span><span class="w">
          </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">

   </span><span class="n">normalized</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w">
          </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">quantization</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">

          </span><span class="nc">This</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="n">measure</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">independent</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">

   </span><span class="n">normalized</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w">
          </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">largest</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">quantization</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">pixel</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">

          </span><span class="nc">This</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="n">measure</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">normalized</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">  </span><span class="nc">It</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">independent</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span></code></pre><p>SEE ALSO</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">display</span><span class="p" data-group-id="3615956281-1">(</span><span class="mi">1</span><span class="p" data-group-id="3615956281-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">animate</span><span class="p" data-group-id="3615956281-2">(</span><span class="mi">1</span><span class="p" data-group-id="3615956281-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">mogrify</span><span class="p" data-group-id="3615956281-3">(</span><span class="mi">1</span><span class="p" data-group-id="3615956281-3">)</span><span class="p">,</span><span class="w"> </span><span class="kn">import</span><span class="p" data-group-id="3615956281-4">(</span><span class="mi">1</span><span class="p" data-group-id="3615956281-4">)</span><span class="p">,</span><span class="w"> </span><span class="n">miff</span><span class="p" data-group-id="3615956281-5">(</span><span class="mi">5</span><span class="p" data-group-id="3615956281-5">)</span></code></pre><p>COPYRIGHT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Copyright</span><span class="w"> </span><span class="p" data-group-id="9913919291-1">(</span><span class="nc">C</span><span class="p" data-group-id="9913919291-1">)</span><span class="w"> </span><span class="mi">2002</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="nc">Studio</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">profit</span><span class="w"> </span><span class="n">organization</span><span class="w"> </span><span class="n">dedicated</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">software</span><span class="w"> </span><span class="n">imaging</span><span class="w"> </span><span class="n">solutions</span><span class="w"> </span><span class="n">freely</span><span class="w"> </span><span class="n">available</span><span class="o">.</span><span class="w">

   </span><span class="nc">Permission</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">hereby</span><span class="w"> </span><span class="n">granted</span><span class="p">,</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">charge</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="n">obtaining</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">software</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">associated</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="p" data-group-id="9913919291-2">(</span><span class="s">&quot;ImageMagick&quot;</span><span class="p" data-group-id="9913919291-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">deal</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="n">without</span><span class="w">
   </span><span class="n">restriction</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">limitation</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rights</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="p">,</span><span class="w"> </span><span class="n">copy</span><span class="p">,</span><span class="w"> </span><span class="n">modify</span><span class="p">,</span><span class="w"> </span><span class="n">merge</span><span class="p">,</span><span class="w"> </span><span class="n">publish</span><span class="p">,</span><span class="w"> </span><span class="n">distribute</span><span class="p">,</span><span class="w"> </span><span class="n">sublicense</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="o">/</span><span class="ow">or</span><span class="w"> </span><span class="n">sell</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">permit</span><span class="w"> </span><span class="n">persons</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">whom</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">furnished</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k" data-group-id="9913919291-3">do</span><span class="w"> </span><span class="n">so</span><span class="p">,</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">conditions</span><span class="p">:</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">copyright</span><span class="w"> </span><span class="n">notice</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">permission</span><span class="w"> </span><span class="n">notice</span><span class="w"> </span><span class="n">shall</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">substantial</span><span class="w"> </span><span class="n">portions</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">software</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="s">&quot;as is&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">warranty</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">kind</span><span class="p">,</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">implied</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">limited</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">warranties</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">merchantability</span><span class="p">,</span><span class="w"> </span><span class="n">fitness</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">pur</span><span class="err">‐</span><span class="w">
   </span><span class="n">pose</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">noninfringement</span><span class="o">.</span><span class="w">  </span><span class="nc">In</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">shall</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="nc">Studio</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">liable</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">claim</span><span class="p">,</span><span class="w"> </span><span class="n">damages</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">liability</span><span class="p">,</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">contract</span><span class="p">,</span><span class="w"> </span><span class="n">tort</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">otherwise</span><span class="p">,</span><span class="w"> </span><span class="n">arising</span><span class="w">
   </span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">dealings</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="o">.</span><span class="w">

   </span><span class="nc">Except</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">notice</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="nc">Studio</span><span class="w"> </span><span class="n">shall</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">advertising</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">promote</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">sale</span><span class="p">,</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">dealings</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w">
   </span><span class="n">without</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="n">authorization</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="nc">Studio</span><span class="o">.</span></code></pre><p>ACKNOWLEDGEMENTS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Paul</span><span class="w"> </span><span class="nc">Raveling</span><span class="p">,</span><span class="w"> </span><span class="nc">USC</span><span class="w"> </span><span class="nc">Information</span><span class="w"> </span><span class="nc">Sciences</span><span class="w"> </span><span class="nc">Institute</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">idea</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">subdivision</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">reduction</span><span class="w"> </span><span class="n">algorithm</span><span class="o">.</span><span class="w">  </span><span class="nc">With</span><span class="w"> </span><span class="nc">Paul</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">permission</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">is</span><span class="w">
   </span><span class="n">an</span><span class="w"> </span><span class="n">adaptation</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="n">wrote</span><span class="o">.</span></code></pre><p>AUTHORS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">John</span><span class="w"> </span><span class="nc">Cristy</span><span class="p">,</span><span class="w"> </span><span class="nc">ImageMagick</span><span class="w"> </span><span class="nc">Studio</span></code></pre><p>ImageMagick                                                                               $Date$                                                                              quantize(5)</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="pwquality-conf.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
pwquality.conf
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="reader-conf.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
reader.conf
        </span>
      </a>

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.2) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
