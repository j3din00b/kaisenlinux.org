<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.1">
    <meta name="project" content="Manpages v2.2.0">

    <title>btrfs-filesystem — Manpages v2.2.0</title>
    <link rel="stylesheet" href="dist/html-elixir-V2ETBPMB.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-IV5W3OL2.js"></script>
    <script src="dist/sidebar_items-507A3EB3.js"></script>

      <script src="doc-versions.js"></script>

    <script async src="dist/html-XN2TSG4M.js"></script>

<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://kaisenlinux.org/manpages/">
        <img src="assets/logo.jpg" alt="Manpages" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v2.2.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">MANUALS</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>



  <span>btrfs-filesystem</span>
</h1>

<p>BTRFS-FILESYSTEM(8)                                                                       BTRFS                                                                       BTRFS-FILESYSTEM(8)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">btrfs</span><span class="o">-</span><span class="n">filesystem</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">primarily</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">filesystems</span></code></pre><p>SYNOPSIS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="o">&lt;</span><span class="n">subcommand</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">btrfs</span><span class="w">  </span><span class="n">filesystem</span><span class="w">  </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="n">tasks</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">regular</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">operations</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">resizing</span><span class="p">,</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">stats</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">setting</span><span class="o">/</span><span class="n">getting</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w">
   </span><span class="n">defragmentation</span><span class="o">.</span><span class="w"> </span><span class="nc">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">tasks</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">scrub</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">balance</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">grouped</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">commands</span><span class="o">.</span></code></pre><p>SUBCOMMAND</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">df</span><span class="w"> </span><span class="p" data-group-id="1280310955-1">[</span><span class="n">options</span><span class="p" data-group-id="1280310955-1">]</span><span class="w"> </span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="w">
          </span><span class="nc">Show</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">terse</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">point</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">purpose</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">was</span><span class="w">  </span><span class="n">a</span><span class="w">  </span><span class="n">debugging</span><span class="w">  </span><span class="n">helper</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w">  </span><span class="n">output</span><span class="w">
          </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">further</span><span class="w"> </span><span class="n">interpreted</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">suitable</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">quick</span><span class="w"> </span><span class="n">overview</span><span class="o">.</span><span class="w">

          </span><span class="nc">An</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="ss">description</span><span class="p">:</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="ss">size</span><span class="p">:</span><span class="w"> </span><span class="mf">1.9</span><span class="nc">TiB</span><span class="p">,</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="nc">RAID</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="ss">size</span><span class="p">:</span><span class="w"> </span><span class="mf">1.9</span><span class="nc">TiB</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ss">with</span><span class="p">:</span><span class="w"> </span><span class="n">mkfs</span><span class="o">.</span><span class="n">btrfs</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">single</span><span class="w">

             </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="w">
             </span><span class="nc">Data</span><span class="p">,</span><span class="w"> </span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="n">total</span><span class="o">=</span><span class="mf">1.15</span><span class="nc">TiB</span><span class="p">,</span><span class="w"> </span><span class="n">used</span><span class="o">=</span><span class="mf">1.13</span><span class="nc">TiB</span><span class="w">
             </span><span class="nc">System</span><span class="p">,</span><span class="w"> </span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="n">total</span><span class="o">=</span><span class="mf">32.00</span><span class="nc">MiB</span><span class="p">,</span><span class="w"> </span><span class="n">used</span><span class="o">=</span><span class="mf">144.00</span><span class="nc">KiB</span><span class="w">
             </span><span class="nc">Metadata</span><span class="p">,</span><span class="w"> </span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="n">total</span><span class="o">=</span><span class="mf">12.00</span><span class="nc">GiB</span><span class="p">,</span><span class="w"> </span><span class="n">used</span><span class="o">=</span><span class="mf">6.45</span><span class="nc">GiB</span><span class="w">
             </span><span class="nc">GlobalReserve</span><span class="p">,</span><span class="w"> </span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="n">total</span><span class="o">=</span><span class="mf">512.00</span><span class="nc">MiB</span><span class="p">,</span><span class="w"> </span><span class="n">used</span><span class="o">=</span><span class="mf">0.00</span><span class="nc">B</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Data</span><span class="p">,</span><span class="w"> </span><span class="nc">System</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Metadata</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">separate</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">types</span><span class="o">.</span><span class="w">  </span><span class="nc">GlobalReserve</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">artificial</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="n">emergency</span><span class="w"> </span><span class="n">space</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">below</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">profile</span><span class="p">,</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">mkfs</span><span class="w"> </span><span class="n">time</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">profiles</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">ie</span><span class="o">.</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="nc">Data</span><span class="o">/</span><span class="n">single</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">it</span><span class="sc">&#39;s not total size of filesystem.

          • used -- sum of used space of the above, ie. file extents, metadata blocks

          GlobalReserve  is  an artificial and internal emergency space. It is used eg.  when the filesystem is full. Its total size is dynamic based on the filesystem size, usually
          not larger than 512MiB, used may fluctuate.

          The GlobalReserve is a portion of Metadata. In case the filesystem metadata is exhausted, GlobalReserve/total + Metadata/used = Metadata/total. Otherwise there appears  to
          be some unused space of Metadata.

          Options

          -b|--raw
                 raw numbers in bytes, without the B suffix

          -h|--human-readable
                 print human friendly numbers, base 1024, this is the default

          -H     print human friendly numbers, base 1000

          --iec  select the 1024 base for the following options, according to the IEC standard

          --si   select the 1000 base for the following options, according to the SI standard

          -k|--kbytes
                 show sizes in KiB, or kB with --si

          -m|--mbytes
                 show sizes in MiB, or MB with --si

          -g|--gbytes
                 show sizes in GiB, or GB with --si

          -t|--tbytes
                 show sizes in TiB, or TB with --si

          If conflicting options are passed, the last one takes precedence.

   defragment [options] &lt;file&gt;|&lt;dir&gt; [&lt;file&gt;|&lt;dir&gt;...]
          Defragment file data on a mounted filesystem. Requires kernel 2.6.33 and newer.

          If  -r  is passed, files in dir will be defragmented recursively (not descending to subvolumes, mount points and directory symlinks).  The start position and the number of
          bytes to defragment can be specified by start and length using -s and -l options below.  Extents bigger than value given by -t will be skipped,  otherwise  this  value  is
          used  as  a target extent size, but is only advisory and may not be reached if the free space is too fragmented.  Use 0 to take the kernel default, which is 256KiB but may
          change in the future.  You can also turn on compression in defragment operations.

          WARNING:
             Defragmenting with Linux kernel versions &lt; 3.9 or ≥ 3.14-rc2 as well as with Linux stable kernel versions ≥ 3.10.31, ≥ 3.12.12 or ≥ 3.13.4 will break up the reflinks of
             COW  data (for example files copied with cp --reflink, snapshots or de-duplicated data).  This may cause considerable increase of space usage depending on the broken up
             reflinks.

          NOTE:
             Directory arguments without -r do not defragment files recursively but will defragment certain internal trees (extent tree and the subvolume tree). This has  been  con‐
             fusing and could be removed in the future.

          For start, len, size it is possible to append units designator: K, M, G, T, P, or E, which represent KiB, MiB, GiB, TiB, PiB, or EiB, respectively (case does not matter).

          Options

          -c[&lt;algo&gt;]
                 compress  file contents while defragmenting. Optional argument selects the compression algorithm, zlib (default), lzo or zstd. Currently it&#39;</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">select</span><span class="w">
                 </span><span class="n">no</span><span class="w"> </span><span class="n">compression</span><span class="o">.</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="nc">EXAMPLES</span><span class="o">.</span><span class="w">

          </span><span class="o">-</span><span class="n">r</span><span class="w">     </span><span class="n">defragment</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">recursively</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">directories</span><span class="p">,</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">descend</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">subvolumes</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">points</span><span class="w">

          </span><span class="o">-</span><span class="n">f</span><span class="w">     </span><span class="n">flush</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">going</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">

                 </span><span class="nc">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">dirty</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="n">accumulates</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">increase</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">load</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w">  </span><span class="n">lead</span><span class="w">  </span><span class="n">to</span><span class="w">
                 </span><span class="nc">ENOSPC</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="sc">&#39;s too much dirty data to write and it&#39;</span><span class="n">s</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reservations</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p" data-group-id="1280310955-2">(</span><span class="n">ie</span><span class="o">.</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">COW</span><span class="w"> </span><span class="n">design</span><span class="w"> </span><span class="n">works</span><span class="p" data-group-id="1280310955-2">)</span><span class="o">.</span><span class="w">

          </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="o">&lt;</span><span class="n">start</span><span class="o">&gt;</span><span class="p" data-group-id="1280310955-3">[</span><span class="n">kKmMgGtTpPeE</span><span class="p" data-group-id="1280310955-3">]</span><span class="w">
                 </span><span class="n">defragmentation</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">beginning</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w">

          </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="o">&lt;</span><span class="n">len</span><span class="o">&gt;</span><span class="p" data-group-id="1280310955-4">[</span><span class="n">kKmMgGtTpPeE</span><span class="p" data-group-id="1280310955-4">]</span><span class="w">
                 </span><span class="n">defragment</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">size</span><span class="w">

          </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span><span class="p" data-group-id="1280310955-5">[</span><span class="n">kKmMgGtTpPeE</span><span class="p" data-group-id="1280310955-5">]</span><span class="w">
                 </span><span class="n">target</span><span class="w"> </span><span class="n">extent</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="1280310955-6">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="n">extents</span><span class="w"> </span><span class="n">bigger</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="nc">MiB</span><span class="w">

                 </span><span class="nc">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">advisory</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">extents</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">differ</span><span class="p">,</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">fragmentation</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="n">logic</span><span class="o">.</span><span class="w"> </span><span class="nc">Reason</span><span class="err">‐</span><span class="w">
                 </span><span class="n">able</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">tens</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">hundreds</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">megabytes</span><span class="o">.</span><span class="w">

          </span><span class="o">-</span><span class="n">v</span><span class="w">     </span><span class="p" data-group-id="1280310955-7">(</span><span class="n">deprecated</span><span class="p" data-group-id="1280310955-7">)</span><span class="w"> </span><span class="kn">alias</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">option</span><span class="w">

   </span><span class="n">du</span><span class="w"> </span><span class="p" data-group-id="1280310955-8">[</span><span class="n">options</span><span class="p" data-group-id="1280310955-8">]</span><span class="w"> </span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="w"> </span><span class="p" data-group-id="1280310955-9">[</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="o">..</span><span class="p" data-group-id="1280310955-9">]</span><span class="w">
          </span><span class="nc">Calculate</span><span class="w"> </span><span class="n">disk</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="nc">FIEMAP</span><span class="o">.</span><span class="w"> </span><span class="nc">For</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">exclusive</span><span class="w"> </span><span class="p" data-group-id="1280310955-10">(</span><span class="ow">not</span><span class="w"> </span><span class="n">shared</span><span class="p" data-group-id="1280310955-10">)</span><span class="w"> </span><span class="n">bytes</span><span class="o">.</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">also</span><span class="w">  </span><span class="n">calculate</span><span class="w">  </span><span class="n">a</span><span class="w">
          </span><span class="sc">&#39;set shared&#39;</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">described</span><span class="w"> </span><span class="n">below</span><span class="o">.</span><span class="w">

          </span><span class="nc">Each</span><span class="w">  </span><span class="n">argument</span><span class="w">  </span><span class="n">to</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">du</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">calculated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w"> </span><span class="nc">We</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">recursive</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="p" data-group-id="1280310955-11">(</span><span class="n">recur</span><span class="err">‐</span><span class="w">
          </span><span class="n">sion</span><span class="w"> </span><span class="n">descends</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">subvolumes</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">points</span><span class="p" data-group-id="1280310955-11">)</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">set</span><span class="o">.</span><span class="w">

          </span><span class="n">set</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="n">overlapping</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">extents</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">isn</span><span class="sc">&#39;t as simple as adding up shared extents.

          Options

          -s|--summarize
                 display only a total for each argument

          --raw  raw numbers in bytes, without the B suffix.

          --human-readable
                 print human friendly numbers, base 1024, this is the default

          --iec  select the 1024 base for the following options, according to the IEC standard.

          --si   select the 1000 base for the following options, according to the SI standard.

          --kbytes
                 show sizes in KiB, or kB with --si.

          --mbytes
                 show sizes in MiB, or MB with --si.

          --gbytes
                 show sizes in GiB, or GB with --si.

          --tbytes
                 show sizes in TiB, or TB with --si.

   label [&lt;device&gt;|&lt;mountpoint&gt;] [&lt;newlabel&gt;]
          Show or update the label of a filesystem. This works on a mounted filesystem or a filesystem image.

          The newlabel argument is optional. Current label is printed if the argument is omitted.

          NOTE:
             The maximum allowable length shall be less than 256 chars and must not contain a newline. The trailing newline is stripped automatically.

   mkswapfile [-s size] file
          Create a new file that&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">suitable</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">swapfile</span><span class="o">.</span><span class="w"> </span><span class="nc">Default</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">2</span><span class="nc">GiB</span><span class="p">,</span><span class="w"> </span><span class="n">minimum</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mi">40</span><span class="nc">KiB</span><span class="o">.</span><span class="w">

          </span><span class="nc">A</span><span class="w"> </span><span class="n">swapfile</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="ss">way</span><span class="p">:</span><span class="w"> </span><span class="nc">NOCOW</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">preallocated</span><span class="o">.</span><span class="w">  </span><span class="nc">Subvolume</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">swapfile</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">snapshotted</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">activated</span><span class="w"> </span><span class="n">swapfile</span><span class="w"> </span><span class="n">cannot</span><span class="w">  </span><span class="n">be</span><span class="w">
          </span><span class="n">balanced</span><span class="o">.</span><span class="w">

          </span><span class="nc">Swapfile</span><span class="w"> </span><span class="n">creation</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">achieved</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">standalone</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">too</span><span class="o">.</span><span class="w"> </span><span class="nc">Activation</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">swapon</span><span class="p" data-group-id="1280310955-12">(</span><span class="mi">8</span><span class="p" data-group-id="1280310955-12">)</span><span class="o">.</span><span class="w">

          </span><span class="nc">Options</span><span class="w">

          </span><span class="o">-</span><span class="n">s</span><span class="o">|</span><span class="o">--</span><span class="n">size</span><span class="w"> </span><span class="nc">SIZE</span><span class="w">
                 </span><span class="nc">Create</span><span class="w"> </span><span class="n">swapfile</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="nc">SIZE</span><span class="w"> </span><span class="p" data-group-id="1280310955-13">(</span><span class="n">accepting</span><span class="w"> </span><span class="n">k</span><span class="o">/</span><span class="n">m</span><span class="o">/</span><span class="n">g</span><span class="o">/</span><span class="n">e</span><span class="o">/</span><span class="n">p</span><span class="w"> </span><span class="n">suffix</span><span class="p" data-group-id="1280310955-13">)</span><span class="o">.</span><span class="w">

   </span><span class="n">resize</span><span class="w"> </span><span class="p" data-group-id="1280310955-14">[</span><span class="n">options</span><span class="p" data-group-id="1280310955-14">]</span><span class="w"> </span><span class="p" data-group-id="1280310955-15">[</span><span class="o">&lt;</span><span class="n">devid</span><span class="o">&gt;</span><span class="p">:</span><span class="p" data-group-id="1280310955-15">]</span><span class="p" data-group-id="1280310955-16">[</span><span class="o">+</span><span class="o">/</span><span class="o">-</span><span class="p" data-group-id="1280310955-16">]</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span><span class="p" data-group-id="1280310955-17">[</span><span class="n">kKmMgGtTpPeE</span><span class="p" data-group-id="1280310955-17">]</span><span class="o">|</span><span class="p" data-group-id="1280310955-18">[</span><span class="o">&lt;</span><span class="n">devid</span><span class="o">&gt;</span><span class="p">:</span><span class="p" data-group-id="1280310955-18">]</span><span class="n">max</span><span class="w"> </span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="w">
          </span><span class="nc">Resize</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">resized</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">devid</span><span class="o">.</span><span class="w">

          </span><span class="ss">WARNING</span><span class="p">:</span><span class="w">
             </span><span class="nc">If</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">BTRFS</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">instead</span><span class="o">.</span><span class="w">

          </span><span class="nc">The</span><span class="w">  </span><span class="n">devid</span><span class="w">  </span><span class="n">can</span><span class="w">  </span><span class="n">be</span><span class="w">  </span><span class="n">found</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specified</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w">
          </span><span class="n">prefix</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">increased</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">decreased</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">quantity</span><span class="w"> </span><span class="n">size</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">units</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">size</span><span class="o">.</span><span class="w">  </span><span class="nc">Optionally</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">size</span><span class="w">  </span><span class="n">parameter</span><span class="w">
          </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">suffixed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="ss">designators</span><span class="p">:</span><span class="w"> </span><span class="nc">K</span><span class="p">,</span><span class="w"> </span><span class="nc">M</span><span class="p">,</span><span class="w"> </span><span class="nc">G</span><span class="p">,</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="nc">P</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">E</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">represent</span><span class="w"> </span><span class="nc">KiB</span><span class="p">,</span><span class="w"> </span><span class="nc">MiB</span><span class="p">,</span><span class="w"> </span><span class="nc">GiB</span><span class="p">,</span><span class="w"> </span><span class="nc">TiB</span><span class="p">,</span><span class="w"> </span><span class="nc">PiB</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">EiB</span><span class="p">,</span><span class="w"> </span><span class="n">respectively</span><span class="w"> </span><span class="p" data-group-id="1280310955-19">(</span><span class="k">case</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">matter</span><span class="p" data-group-id="1280310955-19">)</span><span class="o">.</span><span class="w">

          </span><span class="nc">If</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">passed</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">occupy</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">respecting</span><span class="w"> </span><span class="n">devid</span><span class="w"> </span><span class="p" data-group-id="1280310955-20">(</span><span class="n">remember</span><span class="p">,</span><span class="w"> </span><span class="n">devid</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="p" data-group-id="1280310955-20">)</span><span class="o">.</span><span class="w">

          </span><span class="nc">The</span><span class="w">  </span><span class="n">resize</span><span class="w">  </span><span class="n">command</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">manipulate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">partition</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">wish</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">enlarge</span><span class="o">/</span><span class="n">reduce</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">filesystem</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">expand</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">partition</span><span class="w"> </span><span class="n">be</span><span class="err">‐</span><span class="w">
          </span><span class="n">fore</span><span class="w"> </span><span class="n">enlarging</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">shrink</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">partition</span><span class="w"> </span><span class="k" data-group-id="1280310955-6">after</span><span class="w"> </span><span class="n">reducing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">fdisk</span><span class="p" data-group-id="1280310955-21">(</span><span class="mi">8</span><span class="p" data-group-id="1280310955-21">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">parted</span><span class="p" data-group-id="1280310955-22">(</span><span class="mi">8</span><span class="p" data-group-id="1280310955-22">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">delete</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">existing</span><span class="w">  </span><span class="n">parti</span><span class="err">‐</span><span class="w">
          </span><span class="n">tion</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">recreate</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="n">size</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w"> </span><span class="n">recreating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">partition</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">partition</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">before</span><span class="o">.</span><span class="w">

          </span><span class="nc">Growing</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="n">usually</span><span class="w"> </span><span class="n">instant</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="o">.</span><span class="w"> </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">shrinking</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">area</span><span class="w"> </span><span class="n">that</span><span class="sc">&#39;s beyond the new end. Reloca‐
          tion of the data takes time.

          See also section EXAMPLES.

          Options

          --enqueue
                 wait if there&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">exclusive</span><span class="w"> </span><span class="n">operation</span><span class="w"> </span><span class="n">running</span><span class="p">,</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">continue</span><span class="w">

   </span><span class="n">show</span><span class="w"> </span><span class="p" data-group-id="1280310955-23">[</span><span class="n">options</span><span class="p" data-group-id="1280310955-23">]</span><span class="w"> </span><span class="p" data-group-id="1280310955-24">[</span><span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span><span class="o">|</span><span class="o">&lt;</span><span class="n">uuid</span><span class="o">&gt;</span><span class="o">|</span><span class="o">&lt;</span><span class="n">device</span><span class="o">&gt;</span><span class="o">|</span><span class="o">&lt;</span><span class="n">label</span><span class="o">&gt;</span><span class="p" data-group-id="1280310955-24">]</span><span class="w">
          </span><span class="nc">Show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">allocation</span><span class="o">.</span><span class="w">

          </span><span class="nc">If</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">none</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">path</span><span class="o">/</span><span class="n">uuid</span><span class="o">/</span><span class="n">device</span><span class="o">/</span><span class="n">label</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">passed</span><span class="p">,</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">BTRFS</span><span class="w"> </span><span class="n">filesystems</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">shown</span><span class="p">,</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">unmounted</span><span class="o">.</span><span class="w">

          </span><span class="nc">Options</span><span class="w">

          </span><span class="o">-</span><span class="n">m</span><span class="o">|</span><span class="o">--</span><span class="n">mounted</span><span class="w">
                 </span><span class="n">probe</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="nc">BTRFS</span><span class="w"> </span><span class="n">filesystems</span><span class="w">

          </span><span class="o">-</span><span class="n">d</span><span class="o">|</span><span class="o">--</span><span class="n">all</span><span class="o">-</span><span class="n">devices</span><span class="w">
                 </span><span class="n">scan</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="o">/</span><span class="n">dev</span><span class="p">,</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">extracted</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">partitions</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fallback</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">there</span><span class="sc">&#39;s  no  device  node  manager
                 (like udev) available in the system.

          --raw  raw numbers in bytes, without the B suffix

          --human-readable
                 print human friendly numbers, base 1024, this is the default

          --iec  select the 1024 base for the following options, according to the IEC standard

          --si   select the 1000 base for the following options, according to the SI standard

          --kbytes
                 show sizes in KiB, or kB with --si

          --mbytes
                 show sizes in MiB, or MB with --si

          --gbytes
                 show sizes in GiB, or GB with --si

          --tbytes
                 show sizes in TiB, or TB with --si

   sync &lt;path&gt;
          Force  a  sync of the filesystem at path, similar to the sync(1) command. In addition, it starts cleaning of deleted subvolumes. To wait for the subvolume deletion to com‐
          plete use the btrfs subvolume sync command.

   usage [options] &lt;path&gt; [&lt;path&gt;...]
          Show detailed information about internal filesystem usage. This is supposed to replace the btrfs filesystem df command in the long run.

          The level of detail can differ if the command is run under a regular or the root user (due to use of restricted ioctl). For both there&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">information</span><span class="w">
          </span><span class="n">about</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="ss">usage</span><span class="p">:</span><span class="w">

             </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="w">
             </span><span class="ss">WARNING</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">detailed</span><span class="w"> </span><span class="n">chunk</span><span class="w"> </span><span class="n">info</span><span class="p">,</span><span class="w"> </span><span class="nc">RAID5</span><span class="o">/</span><span class="mi">6</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">incorrect</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">root</span><span class="w">
             </span><span class="ss">Overall</span><span class="p">:</span><span class="w">
                 </span><span class="nc">Device</span><span class="w"> </span><span class="ss">size</span><span class="p">:</span><span class="w">                   </span><span class="mf">1.82</span><span class="nc">TiB</span><span class="w">
                 </span><span class="nc">Device</span><span class="w"> </span><span class="ss">allocated</span><span class="p">:</span><span class="w">              </span><span class="mf">1.17</span><span class="nc">TiB</span><span class="w">
                 </span><span class="nc">Device</span><span class="w"> </span><span class="ss">unallocated</span><span class="p">:</span><span class="w">          </span><span class="mf">669.99</span><span class="nc">GiB</span><span class="w">
                 </span><span class="nc">Device</span><span class="w"> </span><span class="ss">missing</span><span class="p">:</span><span class="w">                  </span><span class="mf">0.00</span><span class="nc">B</span><span class="w">
                 </span><span class="nc">Device</span><span class="w"> </span><span class="ss">slack</span><span class="p">:</span><span class="w">                  </span><span class="mf">1.00</span><span class="nc">GiB</span><span class="w">
                 </span><span class="ss">Used</span><span class="p">:</span><span class="w">                          </span><span class="mf">1.14</span><span class="nc">TiB</span><span class="w">
                 </span><span class="nc">Free</span><span class="w"> </span><span class="p" data-group-id="1280310955-25">(</span><span class="n">estimated</span><span class="p" data-group-id="1280310955-25">)</span><span class="p">:</span><span class="w">            </span><span class="mf">692.57</span><span class="nc">GiB</span><span class="w">      </span><span class="p" data-group-id="1280310955-26">(</span><span class="ss">min</span><span class="p">:</span><span class="w"> </span><span class="mf">692.57</span><span class="nc">GiB</span><span class="p" data-group-id="1280310955-26">)</span><span class="w">
                 </span><span class="nc">Free</span><span class="w"> </span><span class="p" data-group-id="1280310955-27">(</span><span class="n">statfs</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p" data-group-id="1280310955-27">)</span><span class="w">            </span><span class="mf">692.57</span><span class="nc">GiB</span><span class="w">
                 </span><span class="nc">Data</span><span class="w"> </span><span class="ss">ratio</span><span class="p">:</span><span class="w">                       </span><span class="mf">1.00</span><span class="w">
                 </span><span class="nc">Metadata</span><span class="w"> </span><span class="ss">ratio</span><span class="p">:</span><span class="w">                   </span><span class="mf">1.00</span><span class="w">
                 </span><span class="nc">Global</span><span class="w"> </span><span class="ss">reserve</span><span class="p">:</span><span class="w">              </span><span class="mf">512.00</span><span class="nc">MiB</span><span class="w">      </span><span class="p" data-group-id="1280310955-28">(</span><span class="ss">used</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="nc">B</span><span class="p" data-group-id="1280310955-28">)</span><span class="w">
                 </span><span class="nc">Multiple</span><span class="w"> </span><span class="ss">profiles</span><span class="p">:</span><span class="w">                  </span><span class="n">no</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">capacity</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="p" data-group-id="1280310955-29">(</span><span class="n">the</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">accounted</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">slack</span><span class="p" data-group-id="1280310955-29">)</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">data</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">system</span><span class="w"> </span><span class="n">profiles</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">accounts</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">extents</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="n">unallocated</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="n">unallocated</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">allocations</span><span class="w"> </span><span class="p" data-group-id="1280310955-30">(</span><span class="n">difference</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">numbers</span><span class="p" data-group-id="1280310955-30">)</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">capacity</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">devices</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="n">slack</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">slack</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="p" data-group-id="1280310955-31">(</span><span class="n">difference</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">occupied</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">filesystem</span><span class="p" data-group-id="1280310955-31">)</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Used</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">data</span><span class="o">/</span><span class="n">metadata</span><span class="o">/</span><span class="n">system</span><span class="w"> </span><span class="n">profiles</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reserved</span><span class="w"> </span><span class="n">space</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Free</span><span class="w">  </span><span class="p" data-group-id="1280310955-32">(</span><span class="n">estimated</span><span class="p" data-group-id="1280310955-32">)</span><span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="n">approximate</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">usable</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">allocated</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">estimating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unallocated</span><span class="w"> </span><span class="n">space</span><span class="w">
            </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">profiles</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">estimate</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">profiles</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">present</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Free</span><span class="w"> </span><span class="p" data-group-id="1280310955-33">(</span><span class="n">statfs</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p" data-group-id="1280310955-33">)</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">reported</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">statfs</span><span class="w"> </span><span class="n">syscall</span><span class="p">,</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="nc">Avail</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">df</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">calculated</span><span class="w">  </span><span class="ow">in</span><span class="w">  </span><span class="n">a</span><span class="w">
            </span><span class="n">different</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">estimate</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="p" data-group-id="1280310955-34">(</span><span class="n">eg</span><span class="o">.</span><span class="w">  </span><span class="n">multiple</span><span class="w"> </span><span class="n">profiles</span><span class="p" data-group-id="1280310955-34">)</span><span class="o">.</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Data</span><span class="w">  </span><span class="n">ratio</span><span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="n">ratio</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">redundancy</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">parity</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">effectively</span><span class="w"> </span><span class="n">usable</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">space</span><span class="p">,</span><span class="w"> </span><span class="n">eg</span><span class="o">.</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="nc">RAID1</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nc">RAID5</span><span class="o">/</span><span class="mi">6</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">de</span><span class="err">‐</span><span class="w">
            </span><span class="n">pends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">devices</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Metadata</span><span class="w"> </span><span class="n">ratio</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">dtto</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">metadata</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Global</span><span class="w"> </span><span class="n">reserve</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">portion</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">reserve</span><span class="p">,</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">emergency</span><span class="w"> </span><span class="n">purposes</span><span class="w"> </span><span class="p" data-group-id="1280310955-35">(</span><span class="n">like</span><span class="w"> </span><span class="n">deletion</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">filesystem</span><span class="p" data-group-id="1280310955-35">)</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Multiple</span><span class="w"> </span><span class="n">profiles</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="p" data-group-id="1280310955-36">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">metadata</span><span class="p" data-group-id="1280310955-36">)</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p" data-group-id="1280310955-37">(</span><span class="n">single</span><span class="p">,</span><span class="w"> </span><span class="n">raid1</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="1280310955-37">)</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">btrfs</span><span class="p" data-group-id="1280310955-38">(</span><span class="mi">5</span><span class="p" data-group-id="1280310955-38">)</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="nc">FILESYSTEMS</span><span class="w"> </span><span class="nc">WITH</span><span class="w"> </span><span class="nc">MULTIPLE</span><span class="w"> </span><span class="nc">BLOCK</span><span class="w">  </span><span class="nc">GROUP</span><span class="w">
            </span><span class="nc">PROFILES</span><span class="o">.</span><span class="w">

          </span><span class="nc">And</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">zoned</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="ss">section</span><span class="p">:</span><span class="w">

             </span><span class="nc">Device</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="ss">unusable</span><span class="p">:</span><span class="w">          </span><span class="mf">5.13</span><span class="nc">GiB</span><span class="w">
             </span><span class="nc">Device</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="ss">size</span><span class="p">:</span><span class="w">            </span><span class="mf">256.00</span><span class="nc">MiB</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w">  </span><span class="n">zone</span><span class="w"> </span><span class="n">unusable</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">that</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">past</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nc">COW</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">anymory</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">chunks</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">reclaimed</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">zones</span><span class="w"> </span><span class="n">re</span><span class="err">‐</span><span class="w">
            </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">usable</span><span class="w"> </span><span class="n">again</span><span class="w">

          </span><span class="err">•</span><span class="w"> </span><span class="nc">Device</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reported</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">managed</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">devices</span><span class="w">

          </span><span class="nc">The</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">stats</span><span class="w"> </span><span class="n">broken</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="ss">types</span><span class="p">:</span><span class="w">

             </span><span class="nc">Data</span><span class="p">,</span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="nc">Size</span><span class="p">:</span><span class="mf">1.15</span><span class="nc">TiB</span><span class="p">,</span><span class="w"> </span><span class="nc">Used</span><span class="p">:</span><span class="mf">1.13</span><span class="nc">TiB</span><span class="w"> </span><span class="p" data-group-id="1280310955-39">(</span><span class="mf">98.26</span><span class="p">%</span><span class="p" data-group-id="1280310955-39">)</span><span class="w">
                </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w">        </span><span class="mf">1.15</span><span class="nc">TiB</span><span class="w">

             </span><span class="nc">Metadata</span><span class="p">,</span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="nc">Size</span><span class="p">:</span><span class="mf">12.00</span><span class="nc">GiB</span><span class="p">,</span><span class="w"> </span><span class="nc">Used</span><span class="p">:</span><span class="mf">6.45</span><span class="nc">GiB</span><span class="w"> </span><span class="p" data-group-id="1280310955-40">(</span><span class="mf">53.75</span><span class="p">%</span><span class="p" data-group-id="1280310955-40">)</span><span class="w">
                </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w">       </span><span class="mf">12.00</span><span class="nc">GiB</span><span class="w">

             </span><span class="nc">System</span><span class="p">,</span><span class="ss">single</span><span class="p">:</span><span class="w"> </span><span class="nc">Size</span><span class="p">:</span><span class="mf">32.00</span><span class="nc">MiB</span><span class="p">,</span><span class="w"> </span><span class="nc">Used</span><span class="p">:</span><span class="mf">144.00</span><span class="nc">KiB</span><span class="w"> </span><span class="p" data-group-id="1280310955-41">(</span><span class="mf">0.44</span><span class="p">%</span><span class="p" data-group-id="1280310955-41">)</span><span class="w">
                </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w">       </span><span class="mf">32.00</span><span class="nc">MiB</span><span class="w">

             </span><span class="ss">Unallocated</span><span class="p">:</span><span class="w">
                </span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb</span><span class="w">      </span><span class="mf">669.99</span><span class="nc">GiB</span><span class="w">

          </span><span class="nc">Data</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="n">profile</span><span class="p">,</span><span class="w"> </span><span class="nc">Size</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">occupied</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nc">Used</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actually</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">space</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">percent</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">ratio</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">Used</span><span class="o">/</span><span class="nc">Size</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w">
          </span><span class="nc">Unallocated</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="n">space</span><span class="o">.</span><span class="w">

          </span><span class="nc">Options</span><span class="w">

          </span><span class="o">-</span><span class="n">b</span><span class="o">|</span><span class="o">--</span><span class="n">raw</span><span class="w">
                 </span><span class="n">raw</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="n">suffix</span><span class="w">

          </span><span class="o">-</span><span class="n">h</span><span class="o">|</span><span class="o">--</span><span class="n">human</span><span class="o">-</span><span class="n">readable</span><span class="w">
                 </span><span class="n">print</span><span class="w"> </span><span class="n">human</span><span class="w"> </span><span class="n">friendly</span><span class="w"> </span><span class="n">numbers</span><span class="p">,</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w">

          </span><span class="o">-</span><span class="nc">H</span><span class="w">     </span><span class="n">print</span><span class="w"> </span><span class="n">human</span><span class="w"> </span><span class="n">friendly</span><span class="w"> </span><span class="n">numbers</span><span class="p">,</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="mi">1000</span><span class="w">

          </span><span class="o">--</span><span class="n">iec</span><span class="w">  </span><span class="n">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">IEC</span><span class="w"> </span><span class="n">standard</span><span class="w">

          </span><span class="o">--</span><span class="n">si</span><span class="w">   </span><span class="n">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">SI</span><span class="w"> </span><span class="n">standard</span><span class="w">

          </span><span class="o">-</span><span class="n">k</span><span class="o">|</span><span class="o">--</span><span class="n">kbytes</span><span class="w">
                 </span><span class="n">show</span><span class="w"> </span><span class="n">sizes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">KiB</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">si</span><span class="w">

          </span><span class="o">-</span><span class="n">m</span><span class="o">|</span><span class="o">--</span><span class="n">mbytes</span><span class="w">
                 </span><span class="n">show</span><span class="w"> </span><span class="n">sizes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">MiB</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">MB</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">si</span><span class="w">

          </span><span class="o">-</span><span class="n">g</span><span class="o">|</span><span class="o">--</span><span class="n">gbytes</span><span class="w">
                 </span><span class="n">show</span><span class="w"> </span><span class="n">sizes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">GiB</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">GB</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">si</span><span class="w">

          </span><span class="o">-</span><span class="n">t</span><span class="o">|</span><span class="o">--</span><span class="n">tbytes</span><span class="w">
                 </span><span class="n">show</span><span class="w"> </span><span class="n">sizes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nc">TiB</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">TB</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">--</span><span class="n">si</span><span class="w">

          </span><span class="o">-</span><span class="nc">T</span><span class="w">     </span><span class="n">show</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">tabular</span><span class="w"> </span><span class="n">format</span><span class="w">

          </span><span class="nc">If</span><span class="w"> </span><span class="n">conflicting</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">passed</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">precedence</span><span class="o">.</span></code></pre><p>EXAMPLES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">defrag</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="w">

   </span><span class="nc">Recursively</span><span class="w">  </span><span class="n">defragment</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="n">print</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">processed</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">batches</span><span class="p">,</span><span class="w"> </span><span class="n">similarly</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">triggered</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">defragmentation</span><span class="w">
   </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">proportional</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="nc">N</span><span class="w"> </span><span class="n">printed</span><span class="w"> </span><span class="n">files</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">dirty</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">throttling</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">slow</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">defragmentation</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">lot</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">IO</span><span class="w"> </span><span class="n">load</span><span class="w">  </span><span class="ow">and</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">system</span><span class="w">  </span><span class="n">may</span><span class="w">
   </span><span class="n">stall</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">moment</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">defrag</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="w">

   </span><span class="nc">Recursively</span><span class="w">  </span><span class="n">defragment</span><span class="w">  </span><span class="n">files</span><span class="w">  </span><span class="n">under</span><span class="w">  </span><span class="n">dir</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">verbose</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">flushed</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w"> </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">slower</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="nc">IO</span><span class="w">
   </span><span class="n">load</span><span class="w"> </span><span class="p" data-group-id="8462404450-1">(</span><span class="n">proportional</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">defragmented</span><span class="w"> </span><span class="n">file</span><span class="p" data-group-id="8462404450-1">)</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">defrag</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">-</span><span class="n">clzo</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="w">

   </span><span class="nc">Recursively</span><span class="w"> </span><span class="n">defragment</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">verbose</span><span class="p">,</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">flushed</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">compression</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">defrag</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="mi">64</span><span class="nc">M</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="w">

   </span><span class="nc">Recursively</span><span class="w"> </span><span class="n">defragment</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">dir</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">verbose</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">extents</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="mi">64</span><span class="nc">MiB</span><span class="o">.</span><span class="w"> </span><span class="nc">As</span><span class="w"> </span><span class="n">stated</span><span class="w"> </span><span class="n">above</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="n">depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">space</span><span class="w">  </span><span class="n">fragmentation</span><span class="w">  </span><span class="ow">and</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">guaranteed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">meet</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">repeatedly</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="nc">G</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="mi">1</span><span class="ss">:-</span><span class="mi">1</span><span class="nc">G</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="w">

   </span><span class="nc">Shrink</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="sc">&#39;s device id 1 by 1GiB. The first syntax expects a device with id 1 to exist, otherwise fails. The second is equivalent and more explicit. For a sin‐
   gle-device filesystem it&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">typically</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">necessary</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">devid</span><span class="w"> </span><span class="n">though</span><span class="o">.</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="w">

   </span><span class="err">$</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">resize</span><span class="w"> </span><span class="mi">1</span><span class="ss">:max</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="w">

   </span><span class="nc">Let</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">devid</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">exists</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">occupy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">eg</span><span class="o">.</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">enlarged</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">grow</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="o">.</span><span class="w"> </span><span class="nc">By</span><span class="w"> </span><span class="n">simply</span><span class="w">  </span><span class="n">using</span><span class="w">  </span><span class="n">max</span><span class="w">  </span><span class="n">as</span><span class="w">
   </span><span class="n">size</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">achieve</span><span class="w"> </span><span class="n">that</span><span class="o">.</span><span class="w">

   </span><span class="ss">NOTE</span><span class="p">:</span><span class="w">
      </span><span class="nc">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">minimize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">device</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">btrfs</span><span class="w"> </span><span class="n">inspect</span><span class="o">-</span><span class="n">internal</span><span class="w"> </span><span class="n">min</span><span class="o">-</span><span class="n">dev</span><span class="o">-</span><span class="n">size</span><span class="w"> </span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">iteratively</span><span class="w"> </span><span class="n">shrink</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">steps</span><span class="o">.</span></code></pre><p>EXIT STATUS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">btrfs</span><span class="w"> </span><span class="n">filesystem</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">succeeds</span><span class="o">.</span><span class="w"> </span><span class="nc">Non</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">failure</span><span class="o">.</span></code></pre><p>AVAILABILITY</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">btrfs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">btrfs</span><span class="o">-</span><span class="n">progs</span><span class="o">.</span><span class="w">  </span><span class="nc">Please</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="n">btrfs</span><span class="o">.</span><span class="n">readthedocs</span><span class="o">.</span><span class="n">io</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">wiki</span><span class="w"> </span><span class="n">http</span><span class="ss">://</span><span class="n">btrfs</span><span class="o">.</span><span class="n">wiki</span><span class="o">.</span><span class="n">kernel</span><span class="o">.</span><span class="n">org</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">further</span><span class="w"> </span><span class="n">information</span><span class="o">.</span></code></pre><p>SEE ALSO</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">btrfs</span><span class="o">-</span><span class="n">subvolume</span><span class="p" data-group-id="6151612845-1">(</span><span class="mi">8</span><span class="p" data-group-id="6151612845-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">mkfs</span><span class="o">.</span><span class="n">btrfs</span><span class="p" data-group-id="6151612845-2">(</span><span class="mi">8</span><span class="p" data-group-id="6151612845-2">)</span></code></pre><p>COPYRIGHT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="mi">2022</span></code></pre><p>6.0.2                                                                                  Nov 26, 2022                                                                   BTRFS-FILESYSTEM(8)</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="btrfs-device.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
btrfs-device
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="btrfs-find-root.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
btrfs-find-root
        </span>
      </a>

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.1) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
