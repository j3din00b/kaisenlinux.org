<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.2">
    <meta name="project" content="Manpages v2.2.0">

    <title>gitprotocol-v2 — Manpages v2.2.0</title>
    <link rel="stylesheet" href="dist/html-elixir-ZA3CNPHL.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-XRYTXUVD.js"></script>
    <script src="dist/sidebar_items-B73095D2.js"></script>

      <script src="doc-versions.js"></script>

    <script async src="dist/html-3CAFJ3W7.js"></script>

<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://kaisenlinux.org/manpages/">
        <img src="assets/logo.jpg" alt="Manpages" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v2.2.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">MANUALS</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>



  <span>gitprotocol-v2</span>
</h1>

<p>GITPROTOCOL-V2(5)                                                                       Git Manual                                                                      GITPROTOCOL-V2(5)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">gitprotocol</span><span class="o">-</span><span class="n">v2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">Git</span><span class="w"> </span><span class="nc">Wire</span><span class="w"> </span><span class="nc">Protocol</span><span class="p">,</span><span class="w"> </span><span class="nc">Version</span><span class="w"> </span><span class="mi">2</span></code></pre><p>SYNOPSIS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="o">&lt;</span><span class="n">over</span><span class="o">-</span><span class="n">the</span><span class="o">-</span><span class="n">wire</span><span class="o">-</span><span class="n">protocol</span><span class="o">&gt;</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">presents</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">specification</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nc">Git</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">wire</span><span class="w"> </span><span class="n">protocol</span><span class="o">.</span><span class="w"> </span><span class="nc">Protocol</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">improve</span><span class="w"> </span><span class="n">upon</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">ways</span><span class="p">:</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">names</span><span class="p">,</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">service</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Easily</span><span class="w"> </span><span class="n">extendable</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">moved</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">protocol</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">hidden</span><span class="w"> </span><span class="n">behind</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">NUL</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">limited</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pkt</span><span class="o">-</span><span class="n">line</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Separate</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">hidden</span><span class="w"> </span><span class="n">behind</span><span class="w"> </span><span class="nc">NUL</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="p" data-group-id="4496804286-1">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">symrefs</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="p" data-group-id="4496804286-1">)</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Reference</span><span class="w"> </span><span class="n">advertisement</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">omitted</span><span class="w"> </span><span class="k">unless</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">requested</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">refs</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Designed</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">stateless</span><span class="o">-</span><span class="n">rpc</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">mind</span><span class="o">.</span><span class="w"> </span><span class="nc">With</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">flush</span><span class="w"> </span><span class="n">semantics</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">helper</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">act</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">proxy</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">communication</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">oriented</span><span class="o">.</span><span class="w"> </span><span class="nc">When</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">contacting</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">advertised</span><span class="o">.</span><span class="w"> </span><span class="nc">Some</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">a</span><span class="w">
   </span><span class="n">client</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="o">.</span><span class="w"> </span><span class="nc">Once</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">completed</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">reuse</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="o">.</span></code></pre><p>PACKET-LINE FRAMING</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">All</span><span class="w"> </span><span class="n">communication</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">packet</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">framing</span><span class="p">,</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">v1</span><span class="o">.</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">gitprotocol</span><span class="o">-</span><span class="n">pack</span><span class="p" data-group-id="5543906678-1">(</span><span class="mi">5</span><span class="p" data-group-id="5543906678-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">gitprotocol</span><span class="o">-</span><span class="n">common</span><span class="p" data-group-id="5543906678-2">(</span><span class="mi">5</span><span class="p" data-group-id="5543906678-2">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span><span class="w">

   </span><span class="nc">In</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">packets</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">semantics</span><span class="p">:</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="mi">0000</span><span class="w"> </span><span class="nc">Flush</span><span class="w"> </span><span class="nc">Packet</span><span class="w"> </span><span class="p" data-group-id="5543906678-3">(</span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="p" data-group-id="5543906678-3">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">message</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="mi">0001</span><span class="w"> </span><span class="nc">Delimiter</span><span class="w"> </span><span class="nc">Packet</span><span class="w"> </span><span class="p" data-group-id="5543906678-4">(</span><span class="n">delim</span><span class="o">-</span><span class="n">pkt</span><span class="p" data-group-id="5543906678-4">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">separates</span><span class="w"> </span><span class="n">sections</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">message</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="mi">0002</span><span class="w"> </span><span class="nc">Response</span><span class="w"> </span><span class="nc">End</span><span class="w"> </span><span class="nc">Packet</span><span class="w"> </span><span class="p" data-group-id="5543906678-5">(</span><span class="n">response</span><span class="o">-</span><span class="k">end</span><span class="o">-</span><span class="n">pkt</span><span class="p" data-group-id="5543906678-5">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">stateless</span><span class="w"> </span><span class="n">connections</span></code></pre><p>INITIAL CLIENT REQUEST</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">In</span><span class="w"> </span><span class="n">general</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">speak</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">respective</span><span class="w"> </span><span class="n">side</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">inevitably</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="nc">GIT_PROTOCOL</span><span class="o">.</span><span class="w">
   </span><span class="nc">More</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">gitprotocol</span><span class="o">-</span><span class="n">pack</span><span class="p" data-group-id="9081744143-1">(</span><span class="mi">5</span><span class="p" data-group-id="9081744143-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">gitprotocol</span><span class="o">-</span><span class="n">http</span><span class="p" data-group-id="9081744143-2">(</span><span class="mi">5</span><span class="p" data-group-id="9081744143-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">GIT_PROTOCOL</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">git</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span><span class="w"> </span><span class="nc">In</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">capability</span><span class="w"> </span><span class="n">advertisement</span><span class="o">.</span></code></pre><p>   Git Transport</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">git</span><span class="ss">://</span><span class="w"> </span><span class="n">transport</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="s">&quot;version=2&quot;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="ss">parameter</span><span class="p">:</span><span class="w">

       </span><span class="mi">003</span><span class="n">egit</span><span class="o">-</span><span class="n">upload</span><span class="o">-</span><span class="n">pack</span><span class="w"> </span><span class="o">/</span><span class="n">project</span><span class="o">.</span><span class="n">git</span><span class="err">\</span><span class="mi">0</span><span class="n">host</span><span class="o">=</span><span class="n">myserver</span><span class="o">.</span><span class="n">com</span><span class="err">\</span><span class="mi">0</span><span class="err">\</span><span class="mi">0</span><span class="n">version</span><span class="o">=</span><span class="mi">2</span><span class="err">\</span><span class="mi">0</span></code></pre><p>   SSH and File Transport</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ssh</span><span class="ss">://</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">file</span><span class="ss">://</span><span class="w"> </span><span class="n">transport</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">GIT_PROTOCOL</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="s">&quot;version=2&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">allow</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pass</span><span class="o">.</span></code></pre><p>   HTTP Transport</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">When</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">http</span><span class="ss">://</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">https</span><span class="ss">://</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;smart&quot;</span><span class="w"> </span><span class="n">info</span><span class="o">/</span><span class="n">refs</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">described</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">gitprotocol</span><span class="o">-</span><span class="n">http</span><span class="p" data-group-id="6057943389-1">(</span><span class="mi">5</span><span class="p" data-group-id="6057943389-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">supplying</span><span class="w"> </span><span class="s">&quot;version=2&quot;</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Git</span><span class="o">-</span><span class="nc">Protocol</span><span class="w"> </span><span class="n">header</span><span class="o">.</span><span class="w">

       </span><span class="ss">C</span><span class="p">:</span><span class="w"> </span><span class="nc">GET</span><span class="w"> </span><span class="err">$</span><span class="nc">GIT_URL</span><span class="o">/</span><span class="n">info</span><span class="o">/</span><span class="n">refs?</span><span class="n">service</span><span class="o">=</span><span class="n">git</span><span class="o">-</span><span class="n">upload</span><span class="o">-</span><span class="n">pack</span><span class="w"> </span><span class="nc">HTTP</span><span class="o">/</span><span class="mf">1.0</span><span class="w">
       </span><span class="ss">C</span><span class="p">:</span><span class="w"> </span><span class="nc">Git</span><span class="o">-</span><span class="ss">Protocol</span><span class="p">:</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="mi">2</span><span class="w">

   </span><span class="nc">A</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="ss">reply</span><span class="p">:</span><span class="w">

       </span><span class="ss">S</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="nc">OK</span><span class="w">
       </span><span class="ss">S</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nc">Some</span><span class="w"> </span><span class="n">headers</span><span class="o">&gt;</span><span class="w">
       </span><span class="ss">S</span><span class="p">:</span><span class="w"> </span><span class="n">...</span><span class="w">
       </span><span class="ss">S</span><span class="p">:</span><span class="w">
       </span><span class="ss">S</span><span class="p">:</span><span class="w"> </span><span class="mi">000</span><span class="n">eversion</span><span class="w"> </span><span class="mi">2</span><span class="err">\</span><span class="n">n</span><span class="w">
       </span><span class="ss">S</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">capability</span><span class="o">-</span><span class="n">advertisement</span><span class="o">&gt;</span><span class="w">

   </span><span class="nc">Subsequent</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="err">$</span><span class="nc">GIT_URL</span><span class="o">/</span><span class="n">git</span><span class="o">-</span><span class="n">upload</span><span class="o">-</span><span class="n">pack</span><span class="o">.</span><span class="w"> </span><span class="p" data-group-id="6057943389-2">(</span><span class="nc">This</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">git</span><span class="o">-</span><span class="k">receive</span><span class="o">-</span><span class="n">pack</span><span class="p" data-group-id="6057943389-2">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">backend</span><span class="o">-</span><span class="n">info</span><span class="o">-</span><span class="n">refs</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">git</span><span class="o">-</span><span class="n">upload</span><span class="o">-</span><span class="n">pack</span><span class="p" data-group-id="6057943389-3">(</span><span class="mi">1</span><span class="p" data-group-id="6057943389-3">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">header</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">GIT_PROTOCOL</span><span class="w"> </span><span class="n">variable</span><span class="o">.</span><span class="w"> </span><span class="nc">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">discussion</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">git</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">backend</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span></code></pre><p>CAPABILITY ADVERTISEMENT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">decides</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">communicate</span><span class="w"> </span><span class="p" data-group-id="1281006085-1">(</span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="p" data-group-id="1281006085-1">)</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">notifies</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">response</span><span class="w">
   </span><span class="n">followed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">advertisement</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">capabilities</span><span class="o">.</span><span class="w"> </span><span class="nc">Each</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w"> </span><span class="nc">Clients</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">ignore</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="n">keys</span><span class="o">.</span><span class="w"> </span><span class="nc">Semantics</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">key</span><span class="o">.</span><span class="w"> </span><span class="nc">Some</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">describe</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="w">

       </span><span class="n">capability</span><span class="o">-</span><span class="n">advertisement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">protocol</span><span class="o">-</span><span class="n">version</span><span class="w">
                                  </span><span class="n">capability</span><span class="o">-</span><span class="n">list</span><span class="w">
                                  </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w">

       </span><span class="n">protocol</span><span class="o">-</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">PKT</span><span class="o">-</span><span class="nc">LINE</span><span class="p" data-group-id="1281006085-2">(</span><span class="s">&quot;version 2&quot;</span><span class="w"> </span><span class="nc">LF</span><span class="p" data-group-id="1281006085-2">)</span><span class="w">
       </span><span class="n">capability</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">capability</span><span class="w">
       </span><span class="n">capability</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">PKT</span><span class="o">-</span><span class="nc">LINE</span><span class="p" data-group-id="1281006085-3">(</span><span class="n">key</span><span class="p" data-group-id="1281006085-4">[</span><span class="o">=</span><span class="n">value</span><span class="p" data-group-id="1281006085-4">]</span><span class="w"> </span><span class="nc">LF</span><span class="p" data-group-id="1281006085-3">)</span><span class="w">

       </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">*</span><span class="p" data-group-id="1281006085-5">(</span><span class="nc">ALPHA</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">DIGIT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">&quot;-_&quot;</span><span class="p" data-group-id="1281006085-5">)</span><span class="w">
       </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">*</span><span class="p" data-group-id="1281006085-6">(</span><span class="nc">ALPHA</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nc">DIGIT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">&quot; -_.,?</span><span class="se">\/</span><span class="s">{}[]()&lt;&gt;!@#$%^&amp;*+=:;&quot;</span><span class="p" data-group-id="1281006085-6">)</span></code></pre><p>COMMAND REQUEST</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">After</span><span class="w"> </span><span class="n">receiving</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">advertisement</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">arguments</span><span class="o">.</span><span class="w"> </span><span class="nc">There</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">an</span><span class="w">
   </span><span class="n">optional</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">queries</span><span class="o">.</span><span class="w"> </span><span class="nc">Only</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="w">

       </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empty</span><span class="o">-</span><span class="n">request</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">command</span><span class="o">-</span><span class="n">request</span><span class="w">
       </span><span class="n">empty</span><span class="o">-</span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w">
       </span><span class="n">command</span><span class="o">-</span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="w">
                         </span><span class="n">capability</span><span class="o">-</span><span class="n">list</span><span class="w">
                         </span><span class="n">delim</span><span class="o">-</span><span class="n">pkt</span><span class="w">
                         </span><span class="n">command</span><span class="o">-</span><span class="n">args</span><span class="w">
                         </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w">
       </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">PKT</span><span class="o">-</span><span class="nc">LINE</span><span class="p" data-group-id="7990224242-1">(</span><span class="s">&quot;command=&quot;</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="nc">LF</span><span class="p" data-group-id="7990224242-1">)</span><span class="w">
       </span><span class="n">command</span><span class="o">-</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">command</span><span class="o">-</span><span class="n">specific</span><span class="o">-</span><span class="n">arg</span><span class="w">

       </span><span class="n">command</span><span class="o">-</span><span class="n">specific</span><span class="o">-</span><span class="n">args</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">framed</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">by</span><span class="w">
       </span><span class="n">each</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">command</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">comprised</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">capabilities</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">advertised</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="nc">MUST</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="n">till</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">issuing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">determined</span><span class="w"> </span><span class="n">by</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">executed</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="w">

   </span><span class="nc">When</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">finished</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">terminate</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">connection</span><span class="o">.</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">optionally</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">consisting</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">indicate</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">made</span><span class="o">.</span></code></pre><p>CAPABILITIES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="ss">capabilities</span><span class="p">:</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">capabilities</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">convey</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">alter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">behavior</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">commands</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">core</span><span class="w">
   </span><span class="n">actions</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="p" data-group-id="4399036590-1">(</span><span class="n">fetch</span><span class="p">,</span><span class="w"> </span><span class="n">push</span><span class="p">,</span><span class="w"> </span><span class="n">etc</span><span class="p" data-group-id="4399036590-1">)</span><span class="o">.</span><span class="w">

   </span><span class="nc">Protocol</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">stateless</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">round</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">stateless</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">perspective</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="k">unless</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w">
   </span><span class="n">has</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">indicating</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">maintained</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="o">.</span><span class="w"> </span><span class="nc">Clients</span><span class="w"> </span><span class="nc">MUST</span><span class="w"> </span><span class="nc">NOT</span><span class="w"> </span><span class="kn">require</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">management</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">correctly</span><span class="o">.</span><span class="w">
   </span><span class="nc">This</span><span class="w"> </span><span class="n">permits</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">round</span><span class="o">-</span><span class="n">robin</span><span class="w"> </span><span class="n">load</span><span class="o">-</span><span class="n">balancing</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">needing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">worry</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">management</span><span class="o">.</span></code></pre><p>   agent</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">advertise</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p" data-group-id="3773818882-1">(</span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">agent</span><span class="o">=</span><span class="nc">X</span><span class="p" data-group-id="3773818882-1">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">notify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="nc">X</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">optionally</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">its</span><span class="w">
   </span><span class="n">own</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="nc">Y</span><span class="w"> </span><span class="p" data-group-id="3773818882-2">(</span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">agent</span><span class="o">=</span><span class="nc">Y</span><span class="p" data-group-id="3773818882-2">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="p" data-group-id="3773818882-3">(</span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="nc">MUST</span><span class="w"> </span><span class="nc">NOT</span><span class="w"> </span><span class="k" data-group-id="3773818882-4">do</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">did</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">advertise</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">agent</span><span class="w"> </span><span class="n">capability</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">Y</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">printable</span><span class="w"> </span><span class="nc">ASCII</span><span class="w"> </span><span class="n">characters</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="p" data-group-id="3773818882-5">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">127</span><span class="p" data-group-id="3773818882-5">)</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">typically</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w">
   </span><span class="s">&quot;package/version&quot;</span><span class="w"> </span><span class="p" data-group-id="3773818882-6">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;git/1.8.3.1&quot;</span><span class="p" data-group-id="3773818882-6">)</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">purely</span><span class="w"> </span><span class="n">informative</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">statistics</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">debugging</span><span class="w"> </span><span class="n">purposes</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">MUST</span><span class="w"> </span><span class="nc">NOT</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">programmatically</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">the</span><span class="w">
   </span><span class="n">presence</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">absence</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">particular</span><span class="w"> </span><span class="n">features</span><span class="o">.</span></code></pre><p>   ls-refs</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">advertisement</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">v2</span><span class="o">.</span><span class="w"> </span><span class="nc">Unlike</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">advertisement</span><span class="p">,</span><span class="w"> </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">refs</span><span class="w">
   </span><span class="n">sent</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="o">.</span><span class="w">

   </span><span class="nc">Additional</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">advertised</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">advertisement</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w">
   </span><span class="ss">features</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;command&gt;=&lt;feature 1&gt; &lt;feature 2&gt;&quot;</span><span class="w">

   </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">arguments</span><span class="p">:</span><span class="w">

       </span><span class="n">symrefs</span><span class="w">
           </span><span class="nc">In</span><span class="w"> </span><span class="n">addition</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">pointed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">it</span><span class="p">,</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">underlying</span><span class="w"> </span><span class="n">ref</span><span class="w">
           </span><span class="n">pointed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">showing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">symbolic</span><span class="w"> </span><span class="n">ref</span><span class="o">.</span><span class="w">
       </span><span class="n">peel</span><span class="w">
           </span><span class="nc">Show</span><span class="w"> </span><span class="n">peeled</span><span class="w"> </span><span class="n">tags</span><span class="o">.</span><span class="w">
       </span><span class="n">ref</span><span class="o">-</span><span class="n">prefix</span><span class="w"> </span><span class="o">&lt;</span><span class="n">prefix</span><span class="o">&gt;</span><span class="w">
           </span><span class="nc">When</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">references</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w">
           </span><span class="n">the</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">prefixes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">displayed</span><span class="o">.</span><span class="w"> </span><span class="nc">Multiple</span><span class="w"> </span><span class="n">instances</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w">
           </span><span class="n">given</span><span class="p">,</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">references</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w">
           </span><span class="n">shown</span><span class="o">.</span><span class="w"> </span><span class="nc">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">purely</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">optimization</span><span class="p">;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="nc">MAY</span><span class="w">
           </span><span class="n">show</span><span class="w"> </span><span class="n">refs</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">chooses</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">clients</span><span class="w">
           </span><span class="n">should</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">themselves</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">unborn</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">advertised</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="err">’</span><span class="n">s</span><span class="w"> </span><span class="n">request</span><span class="o">.</span><span class="w">

       </span><span class="n">unborn</span><span class="w">
           </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="nc">HEAD</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">symref</span><span class="w">
           </span><span class="n">pointing</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">unborn</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="s">&quot;unborn HEAD
           symref-target:&lt;target&gt;&quot;</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="ss">follows</span><span class="p">:</span><span class="w">

       </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">ref</span><span class="w">
                </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w">
       </span><span class="n">obj</span><span class="o">-</span><span class="n">id</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">unborn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8765124971-1">(</span><span class="n">obj</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">&quot;unborn&quot;</span><span class="p" data-group-id="8765124971-1">)</span><span class="w">
       </span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">PKT</span><span class="o">-</span><span class="nc">LINE</span><span class="p" data-group-id="8765124971-2">(</span><span class="n">obj</span><span class="o">-</span><span class="n">id</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">unborn</span><span class="w"> </span><span class="nc">SP</span><span class="w"> </span><span class="n">refname</span><span class="w"> </span><span class="o">*</span><span class="p" data-group-id="8765124971-3">(</span><span class="nc">SP</span><span class="w"> </span><span class="n">ref</span><span class="o">-</span><span class="n">attribute</span><span class="p" data-group-id="8765124971-3">)</span><span class="w"> </span><span class="nc">LF</span><span class="p" data-group-id="8765124971-2">)</span><span class="w">
       </span><span class="n">ref</span><span class="o">-</span><span class="n">attribute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8765124971-4">(</span><span class="n">symref</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">peeled</span><span class="p" data-group-id="8765124971-4">)</span><span class="w">
       </span><span class="n">symref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;symref-target:&quot;</span><span class="w"> </span><span class="n">symref</span><span class="o">-</span><span class="n">target</span><span class="w">
       </span><span class="n">peeled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;peeled:&quot;</span><span class="w"> </span><span class="n">obj</span><span class="o">-</span><span class="n">id</span></code></pre><p>   fetch</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">fetch</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">v2</span><span class="o">.</span><span class="w"> </span><span class="nc">It</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">looked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">modified</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ref</span><span class="o">-</span><span class="n">advertisement</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">stripped</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p" data-group-id="3792536876-1">(</span><span class="n">since</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ls</span><span class="o">-</span><span class="n">refs</span><span class="w">
   </span><span class="n">command</span><span class="w"> </span><span class="n">fills</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">role</span><span class="p" data-group-id="3792536876-1">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">tweaked</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">eliminate</span><span class="w"> </span><span class="n">redundancies</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">permit</span><span class="w"> </span><span class="n">easy</span><span class="w"> </span><span class="n">addition</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">extensions</span><span class="o">.</span><span class="w">

   </span><span class="nc">Additional</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">advertised</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">advertisement</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w">
   </span><span class="ss">features</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;command&gt;=&lt;feature 1&gt; &lt;feature 2&gt;&quot;</span><span class="w">

   </span><span class="nc">A</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">arguments</span><span class="p">:</span><span class="w">

       </span><span class="n">want</span><span class="w"> </span><span class="o">&lt;</span><span class="n">oid</span><span class="o">&gt;</span><span class="w">
           </span><span class="nc">Indicates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="n">to</span><span class="w">
           </span><span class="n">retrieve</span><span class="o">.</span><span class="w">  </span><span class="nc">Wants</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">limited</span><span class="w"> </span><span class="n">to</span><span class="w">
           </span><span class="n">advertised</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="w">

       </span><span class="n">have</span><span class="w"> </span><span class="o">&lt;</span><span class="n">oid</span><span class="o">&gt;</span><span class="w">
           </span><span class="nc">Indicates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">locally</span><span class="o">.</span><span class="w">
           </span><span class="nc">This</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">contains</span><span class="w">
           </span><span class="n">the</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">needs</span><span class="o">.</span><span class="w"> </span><span class="nc">Multiple</span><span class="w"> </span><span class="sc">&#39;have&#39;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w">
           </span><span class="n">supplied</span><span class="o">.</span><span class="w">

       </span><span class="n">done</span><span class="w">
           </span><span class="nc">Indicates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">negotiation</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">terminate</span><span class="w"> </span><span class="p" data-group-id="3792536876-2">(</span><span class="ow">or</span><span class="w">
           </span><span class="ow">not</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">performing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">clone</span><span class="p" data-group-id="3792536876-2">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">should</span><span class="w">
           </span><span class="kn">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">supplied</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">construct</span><span class="w"> </span><span class="n">the</span><span class="w">
           </span><span class="n">packfile</span><span class="o">.</span><span class="w">

       </span><span class="n">thin</span><span class="o">-</span><span class="n">pack</span><span class="w">
           </span><span class="nc">Request</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">thin</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sent</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">deltas</span><span class="w">
           </span><span class="n">which</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">contained</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="p" data-group-id="3792536876-3">(</span><span class="n">but</span><span class="w">
           </span><span class="n">are</span><span class="w"> </span><span class="n">known</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">exist</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">receiving</span><span class="w"> </span><span class="k">end</span><span class="p" data-group-id="3792536876-3">)</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">reduce</span><span class="w"> </span><span class="n">the</span><span class="w">
           </span><span class="n">network</span><span class="w"> </span><span class="n">traffic</span><span class="w"> </span><span class="n">significantly</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">receiving</span><span class="w"> </span><span class="k">end</span><span class="w">
           </span><span class="n">to</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;thicken&quot;</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">packs</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">bases</span><span class="w">
           </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pack</span><span class="o">.</span><span class="w">

       </span><span class="n">no</span><span class="o">-</span><span class="n">progress</span><span class="w">
           </span><span class="nc">Request</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">on</span><span class="w">
           </span><span class="n">side</span><span class="o">-</span><span class="n">band</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="n">transfer</span><span class="p">,</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w">
           </span><span class="n">sent</span><span class="o">.</span><span class="w">  </span><span class="nc">However</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">side</span><span class="o">-</span><span class="n">band</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">error</span><span class="w">
           </span><span class="n">responses</span><span class="o">.</span><span class="w">

       </span><span class="n">include</span><span class="o">-</span><span class="n">tag</span><span class="w">
           </span><span class="nc">Request</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">annotated</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">they</span><span class="w">
           </span><span class="n">point</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">sent</span><span class="o">.</span><span class="w">

       </span><span class="n">ofs</span><span class="o">-</span><span class="n">delta</span><span class="w">
           </span><span class="nc">Indicate</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">understands</span><span class="w"> </span><span class="nc">PACKv2</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="n">referring</span><span class="w">
           </span><span class="n">to</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="n">rather</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">oid</span><span class="o">.</span><span class="w">  </span><span class="nc">That</span><span class="w"> </span><span class="n">is</span><span class="p">,</span><span class="w">
           </span><span class="n">they</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="nc">OBJ_OFS_DELTA</span><span class="w"> </span><span class="p" data-group-id="3792536876-4">(</span><span class="n">aka</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="3792536876-4">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">packfile</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">advertised</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">clients</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">potential</span><span class="w"> </span><span class="n">addition</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shallow</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="err">’</span><span class="n">s</span><span class="w">
   </span><span class="n">response</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">explained</span><span class="w"> </span><span class="n">below</span><span class="o">.</span><span class="w">

       </span><span class="n">shallow</span><span class="w"> </span><span class="o">&lt;</span><span class="n">oid</span><span class="o">&gt;</span><span class="w">
           </span><span class="nc">A</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">notify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">only</span><span class="w">
           </span><span class="n">has</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="p" data-group-id="3792536876-5">(</span><span class="n">meaning</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">doesn</span><span class="sc">&#39;t have the parents of
           a commit) by supplying a &#39;</span><span class="n">shallow</span><span class="w"> </span><span class="o">&lt;</span><span class="n">oid</span><span class="o">&gt;</span><span class="sc">&#39; line for each such
           object so that the server is aware of the limitations of the
           client&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">history</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">aware</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w">
           </span><span class="n">client</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">reachable</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">commits</span><span class="o">.</span><span class="w">

       </span><span class="n">deepen</span><span class="w"> </span><span class="o">&lt;</span><span class="n">depth</span><span class="o">&gt;</span><span class="w">
           </span><span class="nc">Requests</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fetch</span><span class="o">/</span><span class="n">clone</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">commit</span><span class="w">
           </span><span class="n">depth</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;</span><span class="n">depth</span><span class="o">&gt;</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">side</span><span class="o">.</span><span class="w">

       </span><span class="n">deepen</span><span class="o">-</span><span class="n">relative</span><span class="w">
           </span><span class="nc">Requests</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">semantics</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">&quot;deepen&quot;</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">changed</span><span class="w">
           </span><span class="n">to</span><span class="w"> </span><span class="n">indicate</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="sc">&#39;s
           current shallow boundary, instead of relative to the requested
           commits.

       deepen-since &lt;timestamp&gt;
           Requests that the shallow clone/fetch should be cut at a
           specific time, instead of depth.  Internally it&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">to</span><span class="w">
           </span><span class="n">doing</span><span class="w"> </span><span class="s">&quot;git rev-list --max-age=&lt;timestamp&gt;&quot;</span><span class="o">.</span><span class="w"> </span><span class="nc">Cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">with</span><span class="w">
           </span><span class="s">&quot;deepen&quot;</span><span class="o">.</span><span class="w">

       </span><span class="n">deepen</span><span class="o">-</span><span class="ow">not</span><span class="w"> </span><span class="o">&lt;</span><span class="n">rev</span><span class="o">&gt;</span><span class="w">
           </span><span class="nc">Requests</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">clone</span><span class="o">/</span><span class="n">fetch</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">cut</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w">
           </span><span class="n">specific</span><span class="w"> </span><span class="n">revision</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="sc">&#39;&lt;rev&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">depth</span><span class="o">.</span><span class="w">
           </span><span class="nc">Internally</span><span class="w"> </span><span class="n">it</span><span class="sc">&#39;s equivalent of doing &quot;git rev-list --not &lt;rev&gt;&quot;.
           Cannot be used with &quot;deepen&quot;, but can be used with
           &quot;deepen-since&quot;.

   If the filter feature is advertised, the following argument can be included in the client’s request:

       filter &lt;filter-spec&gt;
           Request that various objects from the packfile be omitted
           using one of several filtering techniques. These are intended
           for use with partial clone and partial fetch operations. See
           `rev-list` for possible &quot;filter-spec&quot; values. When communicating
           with other processes, senders SHOULD translate scaled integers
           (e.g. &quot;1k&quot;) into a fully-expanded form (e.g. &quot;1024&quot;) to aid
           interoperability with older receivers that may not understand
           newly-invented scaling suffixes. However, receivers SHOULD
           accept the following suffixes: &#39;</span><span class="n">k</span><span class="sc">&#39;, &#39;</span><span class="n">m</span><span class="sc">&#39;, and &#39;</span><span class="n">g</span><span class="sc">&#39; for 1024,
           1048576, and 1073741824, respectively.

   If the ref-in-want feature is advertised, the following argument can be included in the client’s request as well as the potential addition of the wanted-refs section in the
   server’s response as explained below.

       want-ref &lt;ref&gt;
           Indicates to the server that the client wants to retrieve a
           particular ref, where &lt;ref&gt; is the full name of a ref on the
           server.

   If the sideband-all feature is advertised, the following argument can be included in the client’s request:

       sideband-all
           Instruct the server to send the whole response multiplexed, not just
           the packfile section. All non-flush and non-delim PKT-LINE in the
           response (not only in the packfile section) will then start with a byte
           indicating its sideband (1, 2, or 3), and the server may send &quot;0005</span><span class="se">\2</span><span class="sc">&quot;
           (a PKT-LINE of sideband 2 with no payload) as a keepalive packet.

   If the packfile-uris feature is advertised, the following argument can be included in the client’s request as well as the potential addition of the packfile-uris section in the
   server’s response as explained below.

       packfile-uris &lt;comma-separated list of protocols&gt;
           Indicates to the server that the client is willing to receive
           URIs of any of the given protocols in place of objects in the
           sent packfile. Before performing the connectivity check, the
           client should download from all given URIs. Currently, the
           protocols supported are &quot;http&quot; and &quot;https&quot;.

   If the wait-for-done feature is advertised, the following argument can be included in the client’s request.

       wait-for-done
           Indicates to the server that it should never send &quot;ready&quot;, but
           should wait for the client to say &quot;done&quot; before sending the
           packfile.

   The response of fetch is broken into a number of sections separated by delimiter packets (0001), with each section beginning with its section header. Most sections are sent only
   when the packfile is sent.

       output = acknowledgements flush-pkt |
                [acknowledgments delim-pkt] [shallow-info delim-pkt]
                [wanted-refs delim-pkt] [packfile-uris delim-pkt]
                packfile flush-pkt

       acknowledgments = PKT-LINE(&quot;acknowledgments&quot; LF)
                         (nak | *ack)
                         (ready)
       ready = PKT-LINE(&quot;ready&quot; LF)
       nak = PKT-LINE(&quot;NAK&quot; LF)
       ack = PKT-LINE(&quot;ACK&quot; SP obj-id LF)

       shallow-info = PKT-LINE(&quot;shallow-info&quot; LF)
                      *PKT-LINE((shallow | unshallow) LF)
       shallow = &quot;shallow&quot; SP obj-id
       unshallow = &quot;unshallow&quot; SP obj-id

       wanted-refs = PKT-LINE(&quot;wanted-refs&quot; LF)
                     *PKT-LINE(wanted-ref LF)
       wanted-ref = obj-id SP refname

       packfile-uris = PKT-LINE(&quot;packfile-uris&quot; LF) *packfile-uri
       packfile-uri = PKT-LINE(40*(HEXDIGIT) SP *%x20-ff LF)

       packfile = PKT-LINE(&quot;packfile&quot; LF)
                  *PKT-LINE(%x01-03 *%x00-ff)

       acknowledgments section
           * If the client determines that it is finished with negotiations by
             sending a &quot;done&quot; line (thus requiring the server to send a packfile),
             the acknowledgments sections MUST be omitted from the server&#39;</span><span class="n">s</span><span class="w">
             </span><span class="n">response</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Always</span><span class="w"> </span><span class="n">begins</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="s">&quot;acknowledgments&quot;</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">respond</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s">&quot;NAK&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">none</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">common</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">respond</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s">&quot;ACK obj-id&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">common</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">A</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="s">&quot;ACK&quot;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;NAK&quot;</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">respond</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;ready&quot;</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">indicating</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">acceptable</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="p" data-group-id="3792536876-6">(</span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="ow">in</span><span class="w">
       </span><span class="n">the</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="3792536876-6">)</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">suitable</span><span class="w"> </span><span class="n">cut</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">decided</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;ready&quot;</span><span class="w"> </span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">decide</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="p" data-group-id="3792536876-7">(</span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optimization</span><span class="p" data-group-id="3792536876-7">)</span><span class="w"> </span><span class="n">omit</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="s">&quot;ACK&quot;</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">have</span><span class="w">
       </span><span class="n">sent</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">determined</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">plans</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">further</span><span class="w"> </span><span class="n">negotiation</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">needed</span><span class="o">.</span><span class="w">

           </span><span class="n">shallow</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">section</span><span class="w">
               </span><span class="o">*</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">fetch</span><span class="o">/</span><span class="n">clone</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shallow</span><span class="w">
                 </span><span class="n">client</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">the</span><span class="w">
                 </span><span class="n">server</span><span class="sc">&#39;s response may include a shallow-info section.  The
                 shallow-info section will be included if (due to one of the
                 above conditions) the server needs to inform the client of any
                 shallow boundaries or adjustments to the clients already
                 existing shallow boundaries.

   •   Always begins with the section header &quot;shallow-info&quot;

   •   If a positive depth is requested, the server will compute the set of commits which are no deeper than the desired depth.

   •   The server sends a &quot;shallow obj-id&quot; line for each commit whose parents will not be sent in the following packfile.

   •   The server sends an &quot;unshallow obj-id&quot; line for each commit which the client has indicated is shallow, but is no longer shallow as a result of the fetch (due to its parents
       being sent in the following packfile).

   •   The server MUST NOT send any &quot;unshallow&quot; lines for anything which the client has not indicated was shallow as a part of its request.

           wanted-refs section
               * This section is only included if the client has requested a
                 ref using a &#39;</span><span class="n">want</span><span class="o">-</span><span class="n">ref</span><span class="sc">&#39; line and if a packfile section is also
                 included in the response.

   •   Always begins with the section header &quot;wanted-refs&quot;.

   •   The server will send a ref listing (&quot;&lt;oid&gt; &lt;refname&gt;&quot;) for each reference requested using want-ref lines.

   •   The server MUST NOT send any refs which were not requested using want-ref lines.

           packfile-uris section
               * This section is only included if the client sent
                 &#39;</span><span class="n">packfile</span><span class="o">-</span><span class="n">uris</span><span class="sc">&#39; and the server has at least one such URI to
                 send.

   •   Always begins with the section header &quot;packfile-uris&quot;.

   •   For each URI the server sends, it sends a hash of the pack’s contents (as output by git index-pack) followed by the URI.

   •   The hashes are 40 hex characters long. When Git upgrades to a new hash algorithm, this might need to be updated. (It should match whatever index-pack outputs after &quot;pack</span><span class="se">\t</span><span class="sc">&quot;
       or &quot;keep</span><span class="se">\t</span><span class="sc">&quot;.

           packfile section
               * This section is only included if the client has sent &#39;</span><span class="n">want</span><span class="sc">&#39;
                 lines in its request and either requested that no more
                 negotiation be done by sending &#39;</span><span class="n">done</span><span class="err">&#39;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">has</span><span class="w">
                 </span><span class="n">decided</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sufficient</span><span class="w"> </span><span class="n">cut</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">produce</span><span class="w"> </span><span class="n">a</span><span class="w">
                 </span><span class="n">packfile</span><span class="o">.</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">Always</span><span class="w"> </span><span class="n">begins</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="s">&quot;packfile&quot;</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">transmission</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="n">begins</span><span class="w"> </span><span class="n">immediately</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">header</span><span class="w">

   </span><span class="err">•</span><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">transfer</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">multiplexed</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">semantics</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">side</span><span class="o">-</span><span class="n">band</span><span class="o">-</span><span class="mi">64</span><span class="n">k</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">packet</span><span class="p">,</span><span class="w"> </span><span class="n">during</span><span class="w">
       </span><span class="n">the</span><span class="w"> </span><span class="n">packfile</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">leading</span><span class="w"> </span><span class="mi">4</span><span class="o">-</span><span class="n">byte</span><span class="w"> </span><span class="n">pkt</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="p" data-group-id="3792536876-8">(</span><span class="n">typical</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pkt</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">format</span><span class="p" data-group-id="3792536876-8">)</span><span class="p">,</span><span class="w"> </span><span class="n">followed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">1</span><span class="o">-</span><span class="n">byte</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">followed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="w">

           </span><span class="nc">The</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ss">of</span><span class="p">:</span><span class="w">
                 </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="n">data</span><span class="w">
                 </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="n">messages</span><span class="w">
                 </span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fatal</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">aborts</span></code></pre><p>   server-option</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">If</span><span class="w"> </span><span class="n">advertised</span><span class="p">,</span><span class="w"> </span><span class="n">indicates</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;server-option=&lt;option&gt;&quot;</span><span class="w"> </span><span class="n">capability</span><span class="w">
   </span><span class="n">line</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">capability</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">NUL</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nc">LF</span><span class="w"> </span><span class="n">character</span><span class="o">.</span></code></pre><p>   object-format</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">advertise</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="o">-</span><span class="n">format</span><span class="w"> </span><span class="n">capability</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p" data-group-id="3676265416-1">(</span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">object</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="nc">X</span><span class="p" data-group-id="3676265416-1">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">notify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">deal</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">hash</span><span class="w">
   </span><span class="n">algorithm</span><span class="w"> </span><span class="nc">X</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">specified</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">assumed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">handle</span><span class="w"> </span><span class="nc">SHA</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="nc">SHA</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">object</span><span class="o">-</span><span class="n">format</span><span class="w">
   </span><span class="n">string</span><span class="o">.</span></code></pre><p>   session-id=&lt;session id&gt;</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">advertise</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="nc">ID</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">identify</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">requests</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">advertise</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="nc">ID</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="o">.</span><span class="w">

   </span><span class="nc">Session</span><span class="w"> </span><span class="nc">IDs</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="w"> </span><span class="nc">They</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">fit</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">packet</span><span class="o">-</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">printable</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">whitespace</span><span class="w"> </span><span class="n">characters</span><span class="o">.</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">uses</span><span class="w">
   </span><span class="n">trace2</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="nc">IDs</span><span class="w"> </span><span class="p" data-group-id="0871753673-1">(</span><span class="n">see</span><span class="w"> </span><span class="n">api</span><span class="o">-</span><span class="n">trace2</span><span class="p" data-group-id="0871753673-2">[</span><span class="mi">1</span><span class="p" data-group-id="0871753673-2">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">details</span><span class="p" data-group-id="0871753673-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="nc">ID</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">rely</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">fact</span><span class="o">.</span></code></pre><p>   object-info</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">object</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="w"> </span><span class="nc">Its</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">purpose</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">decisions</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">to</span><span class="w">
   </span><span class="n">fully</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="w"> </span><span class="nc">Object</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">supported</span><span class="o">.</span><span class="w">

   </span><span class="nc">An</span><span class="w"> </span><span class="n">object</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">takes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="ss">arguments</span><span class="p">:</span><span class="w">

       </span><span class="n">size</span><span class="w">
       </span><span class="nc">Requests</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">listed</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">id</span><span class="o">.</span><span class="w">

       </span><span class="n">oid</span><span class="w"> </span><span class="o">&lt;</span><span class="n">oid</span><span class="o">&gt;</span><span class="w">
       </span><span class="nc">Indicates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">wants</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">obtain</span><span class="w">
       </span><span class="n">information</span><span class="w"> </span><span class="k">for</span><span class="o">.</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">object</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">associated</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">information</span><span class="p">,</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">space</span><span class="o">.</span><span class="w">

       </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">flush</span><span class="o">-</span><span class="n">pkt</span><span class="w">

       </span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">PKT</span><span class="o">-</span><span class="nc">LINE</span><span class="p" data-group-id="8816094141-1">(</span><span class="n">attrs</span><span class="p" data-group-id="8816094141-1">)</span><span class="w"> </span><span class="nc">LF</span><span class="p">)</span><span class="w">
               </span><span class="o">*</span><span class="nc">PKT</span><span class="o">-</span><span class="nc">LINE</span><span class="p" data-group-id="8816094141-2">(</span><span class="n">obj</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="nc">LF</span><span class="p" data-group-id="8816094141-2">)</span><span class="w">

       </span><span class="n">attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attr</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">attrs</span><span class="w"> </span><span class="nc">SP</span><span class="w"> </span><span class="n">attrs</span><span class="w">

       </span><span class="n">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;size&quot;</span><span class="w">

       </span><span class="n">obj</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="nc">SP</span><span class="w"> </span><span class="n">obj</span><span class="o">-</span><span class="n">size</span></code></pre><p>GIT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">git</span><span class="p" data-group-id="4556895797-1">(</span><span class="mi">1</span><span class="p" data-group-id="4556895797-1">)</span><span class="w"> </span><span class="n">suite</span></code></pre><p>NOTES</p><pre><code class="makeup elixir" translate="no"><span class="w">    </span><span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="n">api</span><span class="o">-</span><span class="n">trace2</span><span class="w">
       </span><span class="n">file</span><span class="ss">://</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">technical</span><span class="o">/</span><span class="n">api</span><span class="o">-</span><span class="n">trace2</span><span class="o">.</span><span class="n">html</span></code></pre><p>Git 2.39.2                                                                              02/16/2023                                                                      GITPROTOCOL-V2(5)</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="gitprotocol-pack.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
gitprotocol-pack
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="git-repair.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
git-repair
        </span>
      </a>

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.2) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
