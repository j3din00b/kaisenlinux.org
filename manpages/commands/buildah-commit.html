<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.5">
    <meta name="project" content="Manpages v2.1.1">

    <title>buildah-commit — Manpages v2.1.1</title>
    <link rel="stylesheet" href="dist/elixir-64c5e2b63575bddb1c5b.css" />

    <script src="dist/sidebar_items-b870e624f4.js"></script>

      <script src="doc-versions.js"></script>

    <script async src="dist/app-b5f3440501744dc8be3d.js"></script>

<link rel="stylesheet" href="assets/doc.css">
  </head>
  <body data-type="extras">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://kaisenlinux.org/manpages/">
        <img src="assets/logo.jpg" alt="Manpages" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://kaisenlinux.org/manpages/" class="sidebar-projectName" translate="no">
Manpages
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v2.1.1
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">MANUALS</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


  <span>buildah-commit</span>
</h1>

<p>buildah-commit(1)                                                                 General Commands Manual                                                                buildah-commit(1)</p><p>NAME</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">buildah</span><span class="o">-</span><span class="n">commit</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">container</span><span class="o">.</span></code></pre><p>SYNOPSIS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="p" data-group-id="2619552858-1">[</span><span class="n">options</span><span class="p" data-group-id="2619552858-1">]</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="p" data-group-id="2619552858-2">[</span><span class="n">image</span><span class="p" data-group-id="2619552858-2">]</span></code></pre><p>DESCRIPTION</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">Writes</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">container</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">read</span><span class="o">-</span><span class="n">write</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">layers</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">compo</span><span class="err">‐</span><span class="w">
   </span><span class="n">nent</span><span class="p">,</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">provided</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="w">  </span><span class="nc">When</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buildah</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">will</span><span class="w">  </span><span class="n">display</span><span class="w">  </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">  </span><span class="ow">in</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="nc">REPOSITORY</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nc">TAG</span><span class="w"> </span><span class="n">columns</span><span class="o">.</span></code></pre><p>RETURN VALUE</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">The</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="nc">ID</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="o">.</span><span class="w">  </span><span class="nc">On</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="o">.</span></code></pre><p>OPTIONS</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="o">--</span><span class="n">authfile</span><span class="w"> </span><span class="n">path</span><span class="w">

   </span><span class="nc">Path</span><span class="w">  </span><span class="n">of</span><span class="w">  </span><span class="n">the</span><span class="w">  </span><span class="n">authentication</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w"> </span><span class="nc">Default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="3661729053-1">{</span><span class="nc">XDG_</span><span class="err">\</span><span class="nc">RUNTIME_DIR</span><span class="p" data-group-id="3661729053-1">}</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">auth</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="w"> </span><span class="nc">If</span><span class="w"> </span><span class="nc">XDG_RUNTIME_DIR</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">set</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="err">$</span><span class="nc">UID</span><span class="o">/</span><span class="n">auth</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">is</span><span class="w">
   </span><span class="n">created</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">buildah</span><span class="w"> </span><span class="n">login</span><span class="o">.</span><span class="w">

   </span><span class="nc">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">authorization</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">there</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="nc">HOME</span><span class="o">/</span><span class="o">.</span><span class="n">docker</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">checked</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">login</span><span class="o">.</span><span class="w">

   </span><span class="ss">Note</span><span class="p">:</span><span class="w"> </span><span class="nc">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">setting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">REGISTRY_AUTH_FILE</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="o">.</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="nc">REGISTRY_AUTH_FILE</span><span class="o">=</span><span class="n">path</span><span class="w">

   </span><span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">dir</span><span class="w"> </span><span class="n">path</span><span class="w">

   </span><span class="nc">Use</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p" data-group-id="3661729053-2">(</span><span class="o">*</span><span class="o">.</span><span class="n">crt</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="o">.</span><span class="n">cert</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="o">.</span><span class="n">key</span><span class="p" data-group-id="3661729053-2">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">certs</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="n">creds</span><span class="w"> </span><span class="n">creds</span><span class="w">

   </span><span class="nc">The</span><span class="w"> </span><span class="p" data-group-id="3661729053-3">[</span><span class="n">username</span><span class="p" data-group-id="3661729053-4">[</span><span class="ss">:password</span><span class="p" data-group-id="3661729053-4">]</span><span class="p" data-group-id="3661729053-3">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kn">use</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">authenticate</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">required</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supplied</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">appear</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">en</span><span class="err">‐</span><span class="w">
   </span><span class="n">tered</span><span class="o">.</span><span class="w">  </span><span class="nc">The</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">entered</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">echo</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">compression</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="nc">D</span><span class="w">

   </span><span class="nc">Don</span><span class="sc">&#39;t compress filesystem layers when building the image unless it is required by the location where the image is being written.  This is the default setting, because image layers
   are compressed automatically when they are pushed to registries, and images being written to local storage would only need to be decompressed again to be stored.  Compression  can
   be forced in all cases by specifying --disable-compression=false.

   --encryption-key key

   The  [protocol:keyfile]  specifies  the encryption protocol, which can be JWE (RFC7516), PGP (RFC4880), and PKCS7 (RFC2315) and the key material required for image encryption. For
   instance, jwe:/path/to/key.pem or pgp:admin@example.com or pkcs7:/path/to/x509-file.

   --encrypt-layer layer(s)

   Layer(s) to encrypt: 0-indexed layer indices with support for negative indexing (e.g. 0 is the first layer, -1 is the last layer). If not defined, will encrypt all layers  if  en‐
   cryption-key flag is specified.

   --format, -f [oci | docker]

   Control  the  format for the image manifest and configuration data.  Recognized formats include oci (OCI image-spec v1.0, the default) and docker (version 2, using schema format 2
   for the manifest).

   Note: You can also override the default format by setting the BUILDAH_FORMAT environment variable.  export BUILDAH</span><span class="se">\_</span><span class="sc">FORMAT=docker

   --iidfile ImageIDfile

   Write the image ID to the file.

   --manifest &quot;listName&quot;

   Name of the manifest list to which the built image will be added. Creates the manifest list if it does not exist. This option is useful for building multi architecture images.

   --quiet, -q

   When writing the output image, suppress progress output.

   --rm Remove the working container and its contents after creating the image.  Default leaves the container and its content in place.

   --sign-by fingerprint

   Sign the new image using the GPG key that matches the specified fingerprint.

   --squash

   Squash all of the new image&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">layers</span><span class="w"> </span><span class="p" data-group-id="3661729053-5">(</span><span class="n">including</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">inherited</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">image</span><span class="p" data-group-id="3661729053-5">)</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">layer</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="n">timestamp</span><span class="w"> </span><span class="n">seconds</span><span class="w">

   </span><span class="nc">Set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">epoch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">deterministic</span><span class="w"> </span><span class="n">builds</span><span class="w"> </span><span class="p" data-group-id="3661729053-6">(</span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">time</span><span class="p" data-group-id="3661729053-6">)</span><span class="o">.</span><span class="w">  </span><span class="nc">By</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">changed</span><span class="w"> </span><span class="ow">and</span><span class="w">  </span><span class="n">written</span><span class="w">  </span><span class="n">into</span><span class="w">  </span><span class="n">the</span><span class="w">
   </span><span class="n">image</span><span class="w">  </span><span class="n">manifest</span><span class="w">  </span><span class="k">with</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">commit</span><span class="p">,</span><span class="w"> </span><span class="n">causing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="sc">&#39;s sha256 hash to be different even if the sources are exactly the same otherwise.  When --timestamp is set, the created time‐
   stamp is always set to the time specified and therefore not changed, allowing the image&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">sha256</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remain</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="o">.</span><span class="w"> </span><span class="nc">All</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">committed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">layers</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w">
   </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">timestamp</span><span class="o">.</span><span class="w">

   </span><span class="o">--</span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="w"> </span><span class="n">bool</span><span class="o">-</span><span class="n">value</span><span class="w">

   </span><span class="nc">Require</span><span class="w"> </span><span class="nc">HTTPS</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">verification</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">talking</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">registries</span><span class="w"> </span><span class="p" data-group-id="3661729053-7">(</span><span class="n">defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3661729053-7">)</span><span class="o">.</span><span class="w">  </span><span class="nc">TLS</span><span class="w"> </span><span class="n">verification</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">talking</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="n">registry</span><span class="o">.</span></code></pre><p>EXAMPLE</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">newImageName</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">newImageName</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">newImageName</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">removes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="nc">ID</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">$</span><span class="p" data-group-id="8601169100-1">(</span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="n">containerID</span><span class="p" data-group-id="8601169100-1">)</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">disabling</span><span class="w"> </span><span class="n">compression</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">compression</span><span class="w"> </span><span class="n">containerID</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">newImageName</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">disabling</span><span class="w"> </span><span class="n">compression</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">compression</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">newImageName</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">turning</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="n">tls</span><span class="w"> </span><span class="n">verification</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="o">=</span><span class="no">false</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">imageId</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">authentication</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">dir</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="n">auth</span><span class="w">  </span><span class="o">--</span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="o">--</span><span class="n">creds</span><span class="o">=</span><span class="n">username</span><span class="ss">:password</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">imageId</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">auths</span><span class="o">/</span><span class="n">myauths</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">authentication</span><span class="o">.</span><span class="w">
    </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">authfile</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">auths</span><span class="o">/</span><span class="n">myauths</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">dir</span><span class="w"> </span><span class="err">~</span><span class="o">/</span><span class="n">auth</span><span class="w">  </span><span class="o">--</span><span class="n">tls</span><span class="o">-</span><span class="n">verify</span><span class="o">=</span><span class="no">true</span><span class="w"> </span><span class="o">--</span><span class="n">creds</span><span class="o">=</span><span class="n">username</span><span class="ss">:password</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">docker</span><span class="ss">://</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">imageName</span><span class="w">

   </span><span class="nc">This</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">saves</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">stores</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">epoch</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="w">  </span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">timestamp</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="n">containerID</span><span class="w"> </span><span class="n">newImageName</span></code></pre><p>   Building an multi-architecture image using the --manifest option (requires emulation software)</p><pre><code class="makeup elixir" translate="no"><span class="w">          </span><span class="c1">#!/bin/sh</span><span class="w">
          </span><span class="n">build</span><span class="p" data-group-id="2582847533-1">(</span><span class="p" data-group-id="2582847533-1">)</span><span class="w"> </span><span class="p" data-group-id="2582847533-2">{</span><span class="w">
               </span><span class="n">ctr</span><span class="o">=</span><span class="err">$</span><span class="p" data-group-id="2582847533-3">(</span><span class="o">.</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">buildah</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">--</span><span class="n">arch</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="w"> </span><span class="n">ubi8</span><span class="p" data-group-id="2582847533-3">)</span><span class="w">
               </span><span class="o">.</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">buildah</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">$</span><span class="n">ctr</span><span class="w"> </span><span class="n">dnf</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">iputils</span><span class="w">
               </span><span class="o">.</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">buildah</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="w"> </span><span class="n">ubi8ping</span><span class="w"> </span><span class="err">$</span><span class="n">ctr</span><span class="w">
          </span><span class="p" data-group-id="2582847533-2">}</span><span class="w">
          </span><span class="n">build</span><span class="w"> </span><span class="n">arm</span><span class="w">
          </span><span class="n">build</span><span class="w"> </span><span class="n">amd64</span><span class="w">
          </span><span class="n">build</span><span class="w"> </span><span class="n">s390x</span></code></pre><p>ENVIRONMENT</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="nc">BUILD_REGISTRY_SOURCES</span><span class="w">

   </span><span class="nc">BUILD_REGISTRY_SOURCES</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">set</span><span class="p">,</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">treated</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nc">JSON</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">insecureRegistries</span><span class="p">,</span><span class="w"> </span><span class="n">blockedRegistries</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">allowedRegistries</span><span class="o">.</span><span class="w">

   </span><span class="nc">When</span><span class="w"> </span><span class="n">committing</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">portion</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">corresponds</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">compared</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">blockedRegistries</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">if</span><span class="w">
   </span><span class="n">it</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">them</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">denied</span><span class="o">.</span><span class="w">  </span><span class="nc">If</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">registries</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">allowedRegistries</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">portion</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">corresponds</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">registry</span><span class="w">  </span><span class="n">is</span><span class="w">  </span><span class="ow">not</span><span class="w">
   </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">denied</span><span class="o">.</span><span class="w">

   </span><span class="nc">TMPDIR</span><span class="w"> </span><span class="nc">The</span><span class="w"> </span><span class="nc">TMPDIR</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">pulling</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">pushing</span><span class="w"> </span><span class="n">images</span><span class="o">.</span><span class="w">  </span><span class="nc">Defaults</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="sc">&#39;/var/tmp&#39;</span><span class="o">.</span></code></pre><p>FILES</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="p" data-group-id="7508184724-1">(</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="p" data-group-id="7508184724-1">)</span><span class="w">

   </span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">registries</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">consulted</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">completing</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k" data-group-id="7508184724-2">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registry</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">por</span><span class="err">‐</span><span class="w">
   </span><span class="n">tion</span><span class="o">.</span><span class="w">

   </span><span class="n">policy</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="p" data-group-id="7508184724-3">(</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">containers</span><span class="o">/</span><span class="n">policy</span><span class="o">.</span><span class="n">json</span><span class="p" data-group-id="7508184724-3">)</span><span class="w">

   </span><span class="nc">Signature</span><span class="w"> </span><span class="n">policy</span><span class="w"> </span><span class="n">file</span><span class="o">.</span><span class="w">  </span><span class="nc">This</span><span class="w"> </span><span class="n">defines</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trust</span><span class="w"> </span><span class="n">policy</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">images</span><span class="o">.</span><span class="w">  </span><span class="nc">Controls</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">registries</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">the</span><span class="w">  </span><span class="n">tool</span><span class="w">  </span><span class="n">should</span><span class="w">  </span><span class="n">trust</span><span class="w">
   </span><span class="n">the</span><span class="w"> </span><span class="n">images</span><span class="o">.</span></code></pre><p>SEE ALSO</p><pre><code class="makeup elixir" translate="no"><span class="w">   </span><span class="n">buildah</span><span class="p" data-group-id="6101294268-1">(</span><span class="mi">1</span><span class="p" data-group-id="6101294268-1">)</span><span class="p">,</span><span class="w"> </span><span class="n">buildah</span><span class="o">-</span><span class="n">images</span><span class="p" data-group-id="6101294268-2">(</span><span class="mi">1</span><span class="p" data-group-id="6101294268-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">containers</span><span class="o">-</span><span class="n">policy</span><span class="o">.</span><span class="n">json</span><span class="p" data-group-id="6101294268-3">(</span><span class="mi">5</span><span class="p" data-group-id="6101294268-3">)</span><span class="p">,</span><span class="w"> </span><span class="n">containers</span><span class="o">-</span><span class="n">registries</span><span class="o">.</span><span class="n">conf</span><span class="p" data-group-id="6101294268-4">(</span><span class="mi">5</span><span class="p" data-group-id="6101294268-4">)</span></code></pre><p>buildah                                                                                 March 2017                                                                       buildah-commit(1)</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="buildah-build.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
buildah-build
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="buildah-config.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
buildah-config
        </span>
      </a>

  </div>
</div>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.5) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
